function oSe(e,t){let r=EL(e,t),n=nle(t),i=e.state.selection;return{update(a){a.docChanged&&(r.pos=a.changes.mapPos(r.pos),i=i.map(a.changes))},get(a,l,s){let u=EL(e,a),c,d=kL(e,u.pos,u.bias,n);if(r.pos!=u.pos&&!l){let f=kL(e,r.pos,r.bias,n),h=Math.min(f.from,d.from),p=Math.max(f.to,d.to);d=h<d.from?ve.range(h,p):ve.range(p,h)}return l?i.replaceRange(i.main.extend(d.from,d.to)):s&&n==1&&i.ranges.length>1&&(c=sSe(i,u.pos))?c:s?i.addRange(d):ve.create([d])}}}