function SOe(e,t){return Vr.isFunction(e)&&!t&&(t=e,e=""),new Promise(r=>{process.nextTick(()=>{if(e){e=e.trim().toLowerCase().replace(/,+/g," ").replace(/  +/g," ").replace(/ +/g,"|");let i=e.split("|"),a=[],n=[],s=[];if(rl||G3||X3||Y3||t0){if((rl||G3||X3||Y3)&&e==="*"){e="";let u=xOe("service --status-all 2> /dev/null").toString().split(`
`);for(let l of u){let p=l.split("]");p.length===2&&(e+=(e!==""?"|":"")+p[1].trim(),s.push({name:p[1].trim(),running:p[0].indexOf("+")>0}))}i=e.split("|")}let o=t0?"ps -caxo pcpu,pmem,pid,command":"ps -axo pcpu,pmem,pid,command";e!==""&&i.length>0?Op(o+' | grep -v grep | grep -iE "'+e+'"',{maxBuffer:1024*2e4},function(u,l){if(u)Op('ps -o comm | grep -v grep | egrep "'+e+'"',{maxBuffer:1024*2e4},function(p,c){if(p)i.forEach(function(d){a.push({name:d,running:!1,startmode:"",pcpu:0,pmem:0})}),t&&t(a),r(a);else{let d=c.toString().replace(/ +/g," ").replace(/,+/g,".").split(`
`);i.forEach(function(f){let m=d.filter(function(h){return h.indexOf(f)!==-1});a.push({name:f,running:m.length>0,startmode:"",pcpu:0,pmem:0})}),t&&t(a),r(a)}});else{let p=l.toString().replace(/ +/g," ").replace(/,+/g,".").split(`
`);if(i.forEach(function(c){let d;t0?d=p.filter(function(h){return h.toLowerCase().indexOf(c)!==-1}):d=p.filter(function(h){return h.toLowerCase().indexOf(" "+c+":")!==-1||h.toLowerCase().indexOf("/"+c)!==-1});let f=s.filter(h=>h.name===c),m=[];for(let h of d){let g=h.trim().split(" ")[2];g&&m.push(parseInt(g,10))}a.push({name:c,running:s.length&&f.length?f[0].running:d.length>0,startmode:"",pids:m,pcpu:parseFloat(d.reduce(function(h,g){return h+parseFloat(g.trim().split(" ")[0])},0).toFixed(2)),pmem:parseFloat(d.reduce(function(h,g){return h+parseFloat(g.trim().split(" ")[1])},0).toFixed(2))})}),rl){let c='cat /proc/stat | grep "cpu "';for(let d in a)for(let f in a[d].pids)c+=";cat /proc/"+a[d].pids[f]+"/stat";Op(c,{maxBuffer:1024*2e4},function(d,f){let m=f.toString().split(`
`),h=gC(m.shift()),g={},y={};for(let S=0;S<m.length;S++)if(y=vC(m[S],h,r0),y.pid){let x=-1;for(let w in a)for(let b in a[w].pids)parseInt(a[w].pids[b])===parseInt(y.pid)&&(x=w);x>=0&&(a[x].pcpu+=y.pcpuu+y.pcpus),g[y.pid]={pcpuu:y.pcpuu,pcpus:y.pcpus,utime:y.utime,stime:y.stime,cutime:y.cutime,cstime:y.cstime}}r0.all=h,r0.list=g,r0.ms=Date.now()-r0.ms,r0.result=a,t&&t(a),r(a)})}else t&&t(a),r(a)}}):(t&&t(a),r(a))}if(mC)try{Vr.wmic("service get /value").then((o,u)=>{if(u)i.forEach(function(l){a.push({name:l,running:!1,startmode:"",pcpu:0,pmem:0})}),t&&t(a),r(a);else{let l=o.split(/\n\s*\n/);for(let p=0;p<l.length;p++)if(l[p].trim()!==""){let c=l[p].trim().split(`\r
`),d=Vr.getValue(c,"Name","=",!0).toLowerCase(),f=Vr.getValue(c,"Started","=",!0),m=Vr.getValue(c,"StartMode","=",!0),h=Vr.getValue(c,"ProcessId","=",!0);(e==="*"||i.indexOf(d)>=0)&&(a.push({name:d,running:f==="TRUE",startmode:m,pids:[h],pcpu:0,pmem:0}),n.push(d))}e!=="*"&&i.filter(function(c){return n.indexOf(c)===-1}).forEach(function(c){a.push({name:c,running:!1,startmode:"",pids:[],pcpu:0,pmem:0})}),t&&t(a),r(a)}})}catch{t&&t(a),r(a)}}else t&&t({}),r({})})})}