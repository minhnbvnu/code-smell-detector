function _8e(e,t,r=t.selection.ranges){let n=[],i=-1;for(let{from:a,to:l}of r){let s=n.length,u=1e9,c=II(t,a).line;if(c){for(let d=a;d<=l;){let f=t.doc.lineAt(d);if(f.from>i&&(a==l||l>f.from)){i=f.from;let h=/^\s*/.exec(f.text)[0].length,p=h==f.length,m=f.text.slice(h,h+c.length)==c?h:-1;h<f.text.length&&h<u&&(u=h),n.push({line:f,comment:m,token:c,indent:h,empty:p,single:!1})}d=f.to+1}if(u<1e9)for(let d=s;d<n.length;d++)n[d].indent<n[d].line.text.length&&(n[d].indent=u);n.length==s+1&&(n[s].single=!0)}}if(e!=2&&n.some(a=>a.comment<0&&(!a.empty||a.single))){let a=[];for(let{line:s,token:u,indent:c,empty:d,single:f}of n)(f||!d)&&a.push({from:s.from+c,insert:u+" "});let l=t.changes(a);return{changes:l,selection:t.selection.map(l,1)}}else if(e!=1&&n.some(a=>a.comment>=0)){let a=[];for(let{line:l,comment:s,token:u}of n)if(s>=0){let c=l.from+s,d=c+u.length;l.text[d-l.from]==" "&&d++,a.push({from:c,to:d})}return{changes:a}}return null}