function YC(e){function t(u,d){return new RegExp(Fn(u),"m"+(e.case_insensitive?"i":"")+(e.unicodeRegex?"u":"")+(d?"g":""))}class n{constructor(){this.matchIndexes={},this.regexes=[],this.matchAt=1,this.position=0}addRule(d,S){S.position=this.position++,this.matchIndexes[this.matchAt]=S,this.regexes.push([S,d]),this.matchAt+=du(d)+1}compile(){this.regexes.length===0&&(this.exec=()=>null);let d=this.regexes.map(S=>S[1]);this.matcherRe=t(Yo(d,{joinWith:"|"}),!0),this.lastIndex=0}exec(d){this.matcherRe.lastIndex=this.lastIndex;let S=this.matcherRe.exec(d);if(!S)return null;let b=S.findIndex((A,N)=>N>0&&A!==void 0),h=this.matchIndexes[b];return S.splice(0,b),Object.assign(S,h)}}class o{constructor(){this.rules=[],this.multiRegexes=[],this.count=0,this.lastIndex=0,this.regexIndex=0}getMatcher(d){if(this.multiRegexes[d])return this.multiRegexes[d];let S=new n;return this.rules.slice(d).forEach(([b,h])=>S.addRule(b,h)),S.compile(),this.multiRegexes[d]=S,S}resumingScanAtSamePosition(){return this.regexIndex!==0}considerAll(){this.regexIndex=0}addRule(d,S){this.rules.push([d,S]),S.type==="begin"&&this.count++}exec(d){let S=this.getMatcher(this.regexIndex);S.lastIndex=this.lastIndex;let b=S.exec(d);if(this.resumingScanAtSamePosition()&&!(b&&b.index===this.lastIndex)){let h=this.getMatcher(0);h.lastIndex=this.lastIndex+1,b=h.exec(d)}return b&&(this.regexIndex+=b.position+1,this.regexIndex===this.count&&this.considerAll()),b}}function s(u){let d=new o;return u.contains.forEach(S=>d.addRule(S.begin,{rule:S,type:"begin"})),u.terminatorEnd&&d.addRule(u.terminatorEnd,{type:"end"}),u.illegal&&d.addRule(u.illegal,{type:"illegal"}),d}function c(u,d){let S=u;if(u.isCompiled)return S;[OC,DC,GC,MC].forEach(h=>h(u,d)),e.compilerExtensions.forEach(h=>h(u,d)),u.__beforeBegin=null,[yC,IC,xC].forEach(h=>h(u,d)),u.isCompiled=!0;let b=null;return typeof u.keywords=="object"&&u.keywords.$pattern&&(u.keywords=Object.assign({},u.keywords),b=u.keywords.$pattern,delete u.keywords.$pattern),b=b||/\w+/,u.keywords&&(u.keywords=Eu(u.keywords,e.case_insensitive)),S.keywordPatternRe=t(b,!0),d&&(u.begin||(u.begin=/\B|\b/),S.beginRe=t(S.begin),!u.end&&!u.endsWithParent&&(u.end=/\B|\b/),u.end&&(S.endRe=t(S.end)),S.terminatorEnd=Fn(S.end)||"",u.endsWithParent&&d.terminatorEnd&&(S.terminatorEnd+=(u.end?"|":"")+d.terminatorEnd)),u.illegal&&(S.illegalRe=t(u.illegal)),u.contains||(u.contains=[]),u.contains=[].concat(...u.contains.map(function(h){return qC(h==="self"?u:h)})),u.contains.forEach(function(h){c(h,S)}),u.starts&&c(u.starts,d),S.matcher=s(S),S}if(e.compilerExtensions||(e.compilerExtensions=[]),e.contains&&e.contains.includes("self"))throw new Error("ERR: contains `self` is not supported at the top-level of a language.  See documentation.");return e.classNameAliases=fr(e.classNameAliases||{}),c(e)}