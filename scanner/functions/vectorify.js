function vectorify(e,a){var i;a=Object.assign({assignmentReturnsUndefined:!1,scalarEscapes:!1,equalsCallback:void 0,operatorPrefix:"_",throwErrors:!0},a||{}),t="string"==typeof e?e:(t=e.toString()).replace(/^[ \t\n]*(function\s+\().*(\)[ \n\t]*{)/,function(e,t,n,r){return i=n.split(","),""}).replace(/}[ \t\n]*$/,"");var t=_recast.parse(t);if(a.throwErrors){if(t.program.errors&&0<t.program.errors.length)throw t.program.errors[0].original;if(t.program.program&&t.program.program.errors&&0<t.program.program.errors.length)throw t.program.program.errors[0].original}var s=a.operatorPrefix,o=Object.freeze({"+":s+"add","-":s+"sub","*":s+"mul","/":s+"div"}),l={ADD:"+",MUL:"*",SUB:"-",DIV:"/",MAD:"*"},u=_recast.types.builders;t.program=_estraverse.replace(t.program,{leave:a.assignmentReturnsUndefined?function(e,t){var n;if("ExpressionStatement"!==t.type)switch(e.type){case"UpdateExpression":case"AssignmentExpression":return n=e,u.sequenceExpression([n,u.identifier("undefined")])}}:void 0,enter:function(e){if(a.throwErrors&&e.errors&&0<e.errors.length)throw e.errors[0].original;if("UnaryExpression"===e.type&&"Literal"!==e.argument.type)return"-"===e.operator?u.callExpression(u.identifier(s+"neg"),[e.argument]):"+"===e.operator?e.argument:void 0;if(a.equalsCallback&&"BinaryExpression"===e.type&&"=="===e.operator)return a.equalsCallback(e);if("BinaryExpression"===e.type&&!function e(t){return"Literal"===t.type||"BinaryExpression"===t.type&&e(t.left)&&e(t.right)}(e)||"AssignmentExpression"===e.type){var t=o[e.operator[0]];if(t&&1===e.operator.length)return u.callExpression(u.identifier(t),[e.left,e.right]);if(t&&"="===e.operator[1]){if("MemberExpression"!==e.left.type||!e.left.computed&&"Identifier"===e.left.object.type)return u.assignmentExpression("=",e.left,u.callExpression(u.identifier(t+"Mutate"),[e.left,e.right]));var n=e.left,r=e.right,i=n.computed?n.property:u.literal(n.property.name);return u.callExpression(u.identifier(s+"mutate"),[n.object,i,u.identifier(t+"Mutate"),r])}}else if("CallExpression"===e.type){r=l[e.callee.name];if(r)return"MAD"===e.callee.name?u.binaryExpression("+",u.callExpression(u.identifier("MUL"),[e.arguments[0],e.arguments[1]]),e.arguments[2]):u.binaryExpression(r,e.arguments[0],e.arguments[1])}}});t=(t=_recast.print(t,{wrapColumn:1/0}).code).replace(/\bfunction\((__nullish_gen\d+)\) {\n([\s\S]+)\1;\s*\}/g,"function($1){$2$1;}");if("string"==typeof e)return t;for(var n=0;n<i.length;++n)i[n]=i[n].trim();return i.push(t),Function.constructor.apply(null,i)}