function J4(n,t=!1){if(!S2||!Y4||!S2.handlesDynamicScoping)return null;let e=Y4.ScopingShim;if(!e)return null;let i=e.scopeForNode(n),r=Ft(n).getRootNode(),o=s=>{if(!Z4(s,r))return;let a=Array.from(S2.nativeMethods.querySelectorAll.call(s,"*"));a.push(s);for(let l=0;l<a.length;l++){let c=a[l];if(!Z4(c,r))continue;let u=e.currentScopeForNode(c);u!==i&&(u!==""&&e.unscopeNode(c,u),e.scopeNode(c,i))}};if(o(n),t){let s=new MutationObserver(a=>{for(let l=0;l<a.length;l++){let c=a[l];for(let u=0;u<c.addedNodes.length;u++){let h=c.addedNodes[u];h.nodeType===Node.ELEMENT_NODE&&o(h)}}});return s.observe(n,{childList:!0,subtree:!0}),s}else return null}