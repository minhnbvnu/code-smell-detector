function A6e(e,t,r,n,i){var a;let l=n.head-e.from,s=Xo.find(t,l,(a=n.bidiLevel)!==null&&a!==void 0?a:-1,n.assoc),u=t[s],c=u.side(i,r);if(l==c){let h=s+=i?1:-1;if(h<0||h>=t.length)return null;u=t[s=h],l=u.side(!i,r),c=u.side(i,r)}let d=bi(e.text,l,u.forward(i,r));(d<u.from||d>u.to)&&(d=c),Bae=e.text.slice(Math.min(l,d),Math.max(l,d));let f=s==(i?t.length-1:0)?null:t[s+(i?1:-1)];return f&&d==c&&f.level+(i?0:1)<u.level?ve.cursor(f.side(!i,r)+e.from,f.forward(i,r)?1:-1,f.level):ve.cursor(d+e.from,u.forward(i,r)?-1:1,u.level)}