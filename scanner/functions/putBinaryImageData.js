function putBinaryImageData(t,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if("undefined"!=typeof ImageData&&r instanceof ImageData)t.putImageData(r,0,0);else{var o,l,c,u,d,p,v,y,g,_=r.height,m=r.width,b=_%h,A=(_-b)/h,k=0===b?A:A+1,P=t.createImageData(m,h),S=0,w=r.data,x=P.data;if(a)switch(a.length){case 1:p=a[0];v=a[0];y=a[0];g=a[0];break;case 4:p=a[0];v=a[1];y=a[2];g=a[3]}if(r.kind===i.ImageKind.GRAYSCALE_1BPP){var C=w.byteLength,T=new Uint32Array(x.buffer,0,x.byteLength>>2),E=T.length,I=m+7>>3,O=4294967295,M=i.FeatureTest.isLittleEndian?4278190080:255;if(g&&255===g[0]&&0===g[255]){var R=[M,O];O=R[0];M=R[1]}for(l=0;l<k;l++){u=l<A?h:b;o=0;for(c=0;c<u;c++){for(var D=C-S,L=0,G=D>I?m:8*D-7,j=-8&G,N=0,B=0;L<j;L+=8){B=w[S++];T[o++]=128&B?O:M;T[o++]=64&B?O:M;T[o++]=32&B?O:M;T[o++]=16&B?O:M;T[o++]=8&B?O:M;T[o++]=4&B?O:M;T[o++]=2&B?O:M;T[o++]=1&B?O:M}for(;L<G;L++){if(0===N){B=w[S++];N=128}T[o++]=B&N?O:M;N>>=1}}for(;o<E;)T[o++]=0;t.putImageData(P,0,l*h)}}else if(r.kind===i.ImageKind.RGBA_32BPP){var W=!!(p||v||y);c=0;d=m*h*4;for(l=0;l<A;l++){x.set(w.subarray(S,S+d));S+=d;if(W)for(var U=0;U<d;U+=4){p&&(x[U+0]=p[x[U+0]]);v&&(x[U+1]=v[x[U+1]]);y&&(x[U+2]=y[x[U+2]])}t.putImageData(P,0,c);c+=h}if(l<k){d=m*b*4;x.set(w.subarray(S,S+d));if(W)for(var H=0;H<d;H+=4){p&&(x[H+0]=p[x[H+0]]);v&&(x[H+1]=v[x[H+1]]);y&&(x[H+2]=y[x[H+2]])}t.putImageData(P,0,c)}}else{if(r.kind!==i.ImageKind.RGB_24BPP)throw new Error("bad image kind: ".concat(r.kind));var z=!!(p||v||y);d=m*(u=h);for(l=0;l<k;l++){l>=A&&(d=m*(u=b));o=0;for(c=d;c--;){x[o++]=w[S++];x[o++]=w[S++];x[o++]=w[S++];x[o++]=255}if(z)for(var V=0;V<o;V+=4){p&&(x[V+0]=p[x[V+0]]);v&&(x[V+1]=v[x[V+1]]);y&&(x[V+2]=y[x[V+2]])}t.putImageData(P,0,l*h)}}}}