function sfe(e,t,r,n){n===void 0&&(n={});let{window:i=document.defaultView,v5Compat:a=!1}=n,l=i.history,s=Ko.Pop,u=null,c=d();c==null&&(c=0,l.replaceState(nh({},l.state,{idx:c}),""));function d(){return(l.state||{idx:null}).idx}function f(){s=Ko.Pop;let b=d(),v=b==null?null:b-c;c=b,u&&u({action:s,location:g.location,delta:v})}function h(b,v){s=Ko.Push;let y=i2(g.location,b,v);r&&r(y,b),c=d()+1;let $=DB(y,c),x=g.createHref(y);try{l.pushState($,"",x)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;i.location.assign(x)}a&&u&&u({action:s,location:g.location,delta:1})}function p(b,v){s=Ko.Replace;let y=i2(g.location,b,v);r&&r(y,b),c=d();let $=DB(y,c),x=g.createHref(y);l.replaceState($,"",x),a&&u&&u({action:s,location:g.location,delta:0})}function m(b){let v=i.location.origin!=="null"?i.location.origin:i.location.href,y=typeof b=="string"?b:_W(b);return pn(v,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,v)}let g={get action(){return s},get location(){return e(i,l)},listen(b){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(FB,f),u=b,()=>{i.removeEventListener(FB,f),u=null}},createHref(b){return t(i,b)},createURL:m,encodeLocation(b){let v=m(b);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:h,replace:p,go(b){return l.go(b)}};return g}