function v_e(e){var t=gp(this._getId(e)),r={"":t},i={"":N4(t,!1)},a={},n=this;return f_e(e,{allKeys:!0},function(s,o,u,l,p,c,f){if(o!==""){var d=n._getId(s),m=r[l],h=i[l]+"/"+p;if(f!==void 0&&(h+="/"+(typeof f=="number"?f:P4.escapeFragment(f))),typeof d=="string"){d=m=gp(m?jh.resolve(m,d):d);var g=n._refs[d];if(typeof g=="string"&&(g=n._refs[g]),g&&g.schema){if(!JG(s,g.schema))throw new Error('id "'+d+'" resolves to more than one schema')}else if(d!=gp(h))if(d[0]=="#"){if(a[d]&&!JG(s,a[d]))throw new Error('id "'+d+'" resolves to more than one schema');a[d]=s}else n._refs[d]=h}r[o]=m,i[o]=h}}),a}