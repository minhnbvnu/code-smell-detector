function WidgetAnnotation(t){var r;_classCallCheck(this,WidgetAnnotation);r=m.call(this,t);var o=t.dict,d=r.data;r.ref=t.ref;d.annotationType=c.AnnotationType.WIDGET;void 0===d.fieldName&&(d.fieldName=r._constructFieldName(o));void 0===d.actions&&(d.actions=(0,l.collectActions)(t.xref,o,c.AnnotationActionEventType));var g=(0,l.getInheritableProperty)({dict:o,key:"V",getArray:!0});d.fieldValue=r._decodeFormValue(g);var y=(0,l.getInheritableProperty)({dict:o,key:"DV",getArray:!0});d.defaultFieldValue=r._decodeFormValue(y);if(void 0===g&&t.xfaDatasets){var v=r._title.str;if(v){r._hasValueFromXFA=!0;d.fieldValue=g=t.xfaDatasets.getValue(v)}}void 0===g&&null!==d.defaultFieldValue&&(d.fieldValue=d.defaultFieldValue);d.alternativeText=(0,c.stringToPDFString)(o.get("TU")||"");var w=(0,l.getInheritableProperty)({dict:o,key:"DA"})||t.acroForm.get("DA");r._defaultAppearance="string"==typeof w?w:"";d.defaultAppearanceData=(0,u.parseDefaultAppearance)(r._defaultAppearance);var _=(0,l.getInheritableProperty)({dict:o,key:"FT"});d.fieldType=_ instanceof h.Name?_.name:null;var k=(0,l.getInheritableProperty)({dict:o,key:"DR"}),S=t.acroForm.get("DR"),C=r.appearance&&r.appearance.dict.get("Resources");r._fieldResources={localResources:k,acroFormResources:S,appearanceResources:C,mergedResources:h.Dict.merge({xref:t.xref,dictArray:[k,C,S],mergeSubDicts:!0})};d.fieldFlags=(0,l.getInheritableProperty)({dict:o,key:"Ff"});(!Number.isInteger(d.fieldFlags)||d.fieldFlags<0)&&(d.fieldFlags=0);d.readOnly=r.hasFieldFlag(c.AnnotationFieldFlag.READONLY);d.required=r.hasFieldFlag(c.AnnotationFieldFlag.REQUIRED);d.hidden=r._hasFlag(d.annotationFlags,c.AnnotationFlag.HIDDEN);return r}