function Nle(e,t,r=t.selection.ranges){let n=r.map(a=>II(t,a.from).block);if(!n.every(a=>a))return null;let i=r.map((a,l)=>M8e(t,n[l],a.from,a.to));if(e!=2&&!i.every(a=>a))return{changes:t.changes(r.map((a,l)=>i[l]?[]:[{from:a.from,insert:n[l].open+" "},{from:a.to,insert:" "+n[l].close}]))};if(e!=1&&i.some(a=>a)){let a=[];for(let l=0,s;l<i.length;l++)if(s=i[l]){let u=n[l],{open:c,close:d}=s;a.push({from:c.pos-u.open.length,to:c.pos+c.margin},{from:d.pos-d.margin,to:d.pos+u.close.length})}return{changes:a}}return null}