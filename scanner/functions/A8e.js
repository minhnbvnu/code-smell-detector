function A8e(e,t,r,n){let i=n.stringPrefixes||wh.stringPrefixes,a=null,l=e.changeByRange(s=>{if(!s.empty)return{changes:[{insert:t,from:s.from},{insert:t,from:s.to}],effects:au.of(s.to+t.length),range:ve.range(s.anchor+t.length,s.head+t.length)};let u=s.head,c=bb(e.doc,u),d;if(c==t){if(hQ(e,u))return{changes:{insert:t+t,from:u},effects:au.of(u+t.length),range:ve.cursor(u+t.length)};if(_le(e,u)){let h=r&&e.sliceDoc(u,u+t.length*3)==t+t+t?t+t+t:t;return{changes:{from:u,to:u+h.length,insert:h},range:ve.cursor(u+h.length)}}}else{if(r&&e.sliceDoc(u-2*t.length,u)==t+t&&(d=pQ(e,u-2*t.length,i))>-1&&hQ(e,d))return{changes:{insert:t+t+t+t,from:u},effects:au.of(u+t.length),range:ve.cursor(u+t.length)};if(e.charCategorizer(u)(c)!=xa.Word&&pQ(e,u,i)>-1&&!F8e(e,u,t,i))return{changes:{insert:t+t,from:u},effects:au.of(u+t.length),range:ve.cursor(u+t.length)}}return{range:a=s}});return a?null:e.update(l,{scrollIntoView:!0,userEvent:"input.type"})}