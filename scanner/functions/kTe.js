function kTe(e){function t(o){let u=[],l=-1,p=-1,c=[],f=[],d={vendor:"",model:"",bus:"",vram:-1,vramDynamic:!1},m={vendor:"",model:"",main:!1,builtin:!1,connection:"",sizex:-1,sizey:-1,pixeldepth:-1,resolutionx:-1,resolutiony:-1,currentResX:-1,currentResY:-1,positionX:0,positionY:0,currentRefreshRate:-1};for(let h=0;h<o.length;h++)if(o[h].trim()!==""){let g=o[h].search(/\S|$/);u.indexOf(g)===-1&&u.push(g),l=u.indexOf(g),l<p&&(Object.keys(d).length>0&&(c.push(d),d={vendor:"",model:"",bus:"",vram:-1,vramDynamic:!1}),Object.keys(m).length>0&&(f.push(m),m={vendor:"",model:"",main:!1,builtin:!1,connection:"",sizex:-1,sizey:-1,pixeldepth:-1,resolutionx:-1,resolutiony:-1,currentResX:-1,currentResY:-1,positionX:0,positionY:0,currentRefreshRate:-1})),p=l;let x=o[h].split(":");if(l===2&&(x.length>1&&x[0].replace(/ +/g,"").toLowerCase().indexOf("chipsetmodel")!==-1&&(d.model=x[1].trim()),x.length>1&&x[0].replace(/ +/g,"").toLowerCase().indexOf("bus")!==-1&&(d.bus=x[1].trim()),x.length>1&&x[0].replace(/ +/g,"").toLowerCase().indexOf("vendor")!==-1&&(d.vendor=x[1].split("(")[0].trim()),x.length>1&&x[0].replace(/ +/g,"").toLowerCase().indexOf("vram(total)")!==-1&&(d.vram=parseInt(x[1]),x[1].toLowerCase().indexOf("gb")!==-1&&(d.vram=d.vram*1024),d.vramDynamic=!1),x.length>1&&x[0].replace(/ +/g,"").toLowerCase().indexOf("vram(dynamic,max)")!==-1&&(d.vram=parseInt(x[1]),x[1].toLowerCase().indexOf("gb")!==-1&&(d.vram=d.vram*1024),d.vramDynamic=!0)),l===3&&x.length>1&&x[1]===""&&(m.vendor="",m.model=x[0].trim(),m.main=!1,m.builtin=!1,m.connection="",m.sizex=-1,m.sizey=-1,m.positionX=0,m.positionY=0,m.pixeldepth=-1),l===4){if(x.length>1&&x[0].replace(/ +/g,"").toLowerCase().indexOf("resolution")!==-1){let S=x[1].split("x");m.resolutionx=S.length>1?parseInt(S[0]):0,m.resolutiony=S.length>1?parseInt(S[1]):0,m.currentResX=m.resolutionx,m.currentResY=m.resolutiony}x.length>1&&x[0].replace(/ +/g,"").toLowerCase().indexOf("pixeldepth")!==-1&&(m.pixeldepth=parseInt(x[1])),x.length>1&&x[0].replace(/ +/g,"").toLowerCase().indexOf("framebufferdepth")!==-1&&(m.pixeldepth=parseInt(x[1])),x.length>1&&x[0].replace(/ +/g,"").toLowerCase().indexOf("maindisplay")!==-1&&x[1].replace(/ +/g,"").toLowerCase()==="yes"&&(m.main=!0),x.length>1&&x[0].replace(/ +/g,"").toLowerCase().indexOf("built-in")!==-1&&x[1].replace(/ +/g,"").toLowerCase()==="yes"&&(m.builtin=!0,m.connection=""),x.length>1&&x[0].replace(/ +/g,"").toLowerCase().indexOf("connectiontype")!==-1&&(m.builtin=!1,m.connection=x[1].trim())}}return Object.keys(d).length>0&&c.push(d),Object.keys(m).length>0&&f.push(m),{controllers:c,displays:f}}function r(o){let u=[],l={vendor:"",model:"",bus:"",vram:-1,vramDynamic:!1},p=!1,c=[];try{c=xTe('export LC_ALL=C; dmidecode -t 9 2>/dev/null; unset LC_ALL | grep "Bus Address: "').toString().split(`
`);for(let f=0;f<c.length;f++)c[f]=c[f].replace("Bus Address:","").replace("0000:","").trim();c=c.filter(function(f){return f!=null&&f})}catch{kt.noop()}for(let f=0;f<o.length;f++)if(o[f].trim()!==""){if(o[f][0]!==" "&&o[f][0]!=="	"){let d=c.indexOf(o[f].split(" ")[0])>=0,m=o[f].toLowerCase().indexOf(" vga "),h=o[f].toLowerCase().indexOf("3d controller");if(m!==-1||h!==-1){h!==-1&&m===-1&&(m=h),(l.vendor||l.model||l.bus||l.vram!==-1||l.vramDynamic)&&(u.push(l),l={vendor:"",model:"",bus:"",vram:-1,vramDynamic:!1}),p=!0;let g=o[f].search(/\[[0-9a-f]{4}:[0-9a-f]{4}]|$/),x=o[f].substr(m,g-m).split(":");x.length>1&&(x[1]=x[1].trim(),x[1].toLowerCase().indexOf("corporation")>=0?(l.vendor=x[1].substr(0,x[1].toLowerCase().indexOf("corporation")+11).trim(),l.model=x[1].substr(x[1].toLowerCase().indexOf("corporation")+11,200).trim().split("(")[0],l.bus=c.length>0&&d?"PCIe":"Onboard",l.vram=-1,l.vramDynamic=!1):x[1].toLowerCase().indexOf(" inc.")>=0?((x[1].match(new RegExp("]","g"))||[]).length>1?(l.vendor=x[1].substr(0,x[1].toLowerCase().indexOf("]")+1).trim(),l.model=x[1].substr(x[1].toLowerCase().indexOf("]")+1,200).trim().split("(")[0].trim()):(l.vendor=x[1].substr(0,x[1].toLowerCase().indexOf(" inc.")+5).trim(),l.model=x[1].substr(x[1].toLowerCase().indexOf(" inc.")+5,200).trim().split("(")[0].trim()),l.bus=c.length>0&&d?"PCIe":"Onboard",l.vram=-1,l.vramDynamic=!1):x[1].toLowerCase().indexOf(" ltd.")>=0&&((x[1].match(new RegExp("]","g"))||[]).length>1?(l.vendor=x[1].substr(0,x[1].toLowerCase().indexOf("]")+1).trim(),l.model=x[1].substr(x[1].toLowerCase().indexOf("]")+1,200).trim().split("(")[0].trim()):(l.vendor=x[1].substr(0,x[1].toLowerCase().indexOf(" ltd.")+5).trim(),l.model=x[1].substr(x[1].toLowerCase().indexOf(" ltd.")+5,200).trim().split("(")[0].trim())))}else p=!1}if(p){let d=o[f].split(":");if(d.length>1&&d[0].replace(/ +/g,"").toLowerCase().indexOf("devicename")!==-1&&d[1].toLowerCase().indexOf("onboard")!==-1&&(l.bus="Onboard"),d.length>1&&d[0].replace(/ +/g,"").toLowerCase().indexOf("region")!==-1&&d[1].toLowerCase().indexOf("memory")!==-1){let m=d[1].split("=");m.length>1&&(l.vram=parseInt(m[1]))}}}return(l.vendor||l.model||l.bus||l.vram!==-1||l.vramDynamic)&&u.push(l),u}function i(o){let u={vendor:"",model:"",main:!1,builtin:!1,connection:"",sizex:-1,sizey:-1,pixeldepth:-1,resolutionx:-1,resolutiony:-1,currentResX:-1,currentResY:-1,positionX:0,positionY:0,currentRefreshRate:-1},l=108;if(o.substr(l,6)==="000000"&&(l+=36),o.substr(l,6)==="000000"&&(l+=36),o.substr(l,6)==="000000"&&(l+=36),o.substr(l,6)==="000000"&&(l+=36),u.resolutionx=parseInt("0x0"+o.substr(l+8,1)+o.substr(l+4,2)),u.resolutiony=parseInt("0x0"+o.substr(l+14,1)+o.substr(l+10,2)),u.sizex=parseInt("0x0"+o.substr(l+28,1)+o.substr(l+24,2)),u.sizey=parseInt("0x0"+o.substr(l+29,1)+o.substr(l+26,2)),l=o.indexOf("000000fc00"),l>=0){let p=o.substr(l+10,26);p.indexOf("0a")!==-1&&(p=p.substr(0,p.indexOf("0a")));try{p.length>2&&(u.model=p.match(/.{1,2}/g).map(function(c){return String.fromCharCode(parseInt(c,16))}).join(""))}catch{kt.noop()}}else u.model="";return u}function a(o,u){let l=[],p={vendor:"",model:"",main:!1,builtin:!1,connection:"",sizex:-1,sizey:-1,pixeldepth:-1,resolutionx:-1,resolutiony:-1,currentResX:-1,currentResY:-1,positionX:0,positionY:0,currentRefreshRate:-1},c=!1,f=!1,d="",m=0;for(let h=1;h<o.length;h++)if(o[h].trim()!==""){if(o[h][0]!==" "&&o[h][0]!=="	"&&o[h].toLowerCase().indexOf(" connected ")!==-1){(p.model||p.main||p.builtin||p.connection||p.sizex!==-1||p.pixeldepth!==-1||p.resolutionx!==-1)&&(l.push(p),p={vendor:"",model:"",main:!1,builtin:!1,connection:"",sizex:-1,sizey:-1,pixeldepth:-1,resolutionx:-1,resolutiony:-1,currentResX:-1,currentResY:-1,positionX:0,positionY:0,currentRefreshRate:-1});let g=o[h].split(" ");p.connection=g[0],p.main=o[h].toLowerCase().indexOf(" primary ")>=0,p.builtin=g[0].toLowerCase().indexOf("edp")>=0}if(c)if(o[h].search(/\S|$/)>m)d+=o[h].toLowerCase().trim();else{let g=i(d);p.vendor=g.vendor,p.model=g.model,p.resolutionx=g.resolutionx,p.resolutiony=g.resolutiony,p.sizex=g.sizex,p.sizey=g.sizey,p.pixeldepth=u,c=!1}if(o[h].toLowerCase().indexOf("edid:")>=0&&(c=!0,m=o[h].search(/\S|$/)),o[h].toLowerCase().indexOf("*current")>=0){let g=o[h].split("(");if(g&&g.length>1&&g[0].indexOf("x")>=0){let x=g[0].trim().split("x");p.currentResX=kt.toInt(x[0]),p.currentResY=kt.toInt(x[1])}f=!0}if(f&&o[h].toLowerCase().indexOf("clock")>=0&&o[h].toLowerCase().indexOf("hz")>=0&&o[h].toLowerCase().indexOf("v: height")>=0){let g=o[h].split("clock");g&&g.length>1&&g[1].toLowerCase().indexOf("hz")>=0&&(p.currentRefreshRate=kt.toInt(g[1])),f=!1}}return(p.model||p.main||p.builtin||p.connection||p.sizex!==-1||p.pixeldepth!==-1||p.resolutionx!==-1)&&l.push(p),l}return new Promise(o=>{process.nextTick(()=>{let u={controllers:[],displays:[]};if(wTe&&Qh("system_profiler SPDisplaysDataType",function(p,c){if(!p){let f=c.toString().split(`
`);u=t(f)}e&&e(u),o(u)}),bTe&&(kt.isRaspberry()&&kt.isRaspbian()?Qh(`fbset -s | grep 'mode "'; vcgencmd get_mem gpu; tvservice -s; tvservice -n;`,function(p,c){let f=c.toString().split(`
`);if(f.length>3&&f[0].indexOf('mode "')>=-1&&f[2].indexOf("0x12000a")>-1){let d=f[0].replace("mode","").replace(/"/g,"").trim().split("x");d.length===2&&u.displays.push({vendor:"",model:kt.getValue(f,"device_name","="),main:!0,builtin:!1,connection:"HDMI",sizex:-1,sizey:-1,pixeldepth:-1,resolutionx:parseInt(d[0],10),resolutiony:parseInt(d[1],10),currentResX:-1,currentResY:-1,positionX:0,positionY:0,currentRefreshRate:-1})}f.length>1&&f[1].indexOf("gpu=")>=-1&&u.controllers.push({vendor:"Broadcom",model:"VideoCore IV",bus:"",vram:f[1].replace("gpu=",""),vramDynamic:!0}),e&&e(u),o(u)}):Qh("lspci -vvv  2>/dev/null",function(p,c){if(!p){let d=c.toString().split(`
`);u.controllers=r(d)}Qh("xdpyinfo 2>/dev/null | grep 'depth of root window' | awk '{ print $5 }'",function(d,m){let h=0;if(!d){let x=m.toString().split(`
`);h=parseInt(x[0])||0}Qh("xrandr --verbose 2>/dev/null",function(x,S){if(!x){let v=S.toString().split(`
`);u.displays=a(v,h)}e&&e(u),o(u)})})})),(ETe||_Te||CTe)&&(e&&e(u),o(u)),DTe&&(e&&e(u),o(u)),STe)try{let l=[];l.push(kt.wmic("path win32_VideoController get /value")),l.push(kt.wmic("path win32_desktopmonitor get /value")),l.push(kt.powerShell("Get-CimInstance -Namespace root\\wmi -ClassName WmiMonitorBasicDisplayParams | fl")),l.push(kt.powerShell("Add-Type -AssemblyName System.Windows.Forms; [System.Windows.Forms.Screen]::AllScreens")),l.push(kt.powerShell("Get-CimInstance -Namespace root\\wmi -ClassName WmiMonitorConnectionParams | fl")),l.push(kt.powerShell('gwmi WmiMonitorID -Namespace root\\wmi | ForEach-Object {(($_.ManufacturerName -notmatch 0 | foreach {[char]$_}) -join "") + "|" + (($_.ProductCodeID -notmatch 0 | foreach {[char]$_}) -join "") + "|" + (($_.UserFriendlyName -notmatch 0 | foreach {[char]$_}) -join "") + "|" + (($_.SerialNumberID -notmatch 0 | foreach {[char]$_}) -join "") + "|" + $_.InstanceName}')),Promise.all(l).then(p=>{let c=p[0].split(/\n\s*\n/);u.controllers=n(c);let f=p[1].split(/\n\s*\n/);f.shift(),f.pop();let d=p[2].split("Active ");d.shift();let m=p[3].split("BitsPerPixel ");m.shift();let h=p[4].split(/\n\s*\n/);h.shift();let g=p[5].split(/\r\n/),x=[];g.forEach(S=>{let v=S.split("|");v.length===5&&x.push({vendor:v[0],code:v[1],model:v[2],serial:v[3],instanceId:v[4]})}),u.displays=s(m,d,f,h,x),u.displays.length===1&&(Jh&&(u.displays[0].resolutionx=Jh,u.displays[0].currentResX||(u.displays[0].currentResX=Jh)),Zh&&(u.displays[0].resolutiony=Zh,u.displays[0].currentResY===0&&(u.displays[0].currentResY=Zh)),E3&&(u.displays[0].pixeldepth=E3),_3&&!u.displays[0].refreshrate&&(u.displays[0].currentRefreshRate=_3)),e&&e(u),o(u)}).catch(()=>{e&&e(u),o(u)})}catch{e&&e(u),o(u)}})});function n(o){let u=[];for(let l in o)if({}.hasOwnProperty.call(o,l)&&o[l].trim()!==""){let p=o[l].trim().split(`\r
`);u.push({vendor:kt.getValue(p,"AdapterCompatibility","="),model:kt.getValue(p,"name","="),bus:kt.getValue(p,"PNPDeviceID","=").startsWith("PCI")?"PCI":"",vram:parseInt(kt.getValue(p,"AdapterRAM","="),10)/1024/1024,vramDynamic:kt.getValue(p,"VideoMemoryType","=")==="2"}),Jh=kt.toInt(kt.getValue(p,"CurrentHorizontalResolution","="))||Jh,Zh=kt.toInt(kt.getValue(p,"CurrentVerticalResolution","="))||Zh,_3=kt.toInt(kt.getValue(p,"CurrentRefreshRate","="))||_3,E3=kt.toInt(kt.getValue(p,"CurrentBitsPerPixel","="))||E3}return u}function s(o,u,l,p,c){let f=[],d="",m="",h="",g=0,x=0;if(l&&l.length){let S=l[0].split(S3.EOL);d=kt.getValue(S,"MonitorManufacturer","="),m=kt.getValue(S,"Name","="),h=kt.getValue(S,"PNPDeviceID","=").replace(/&amp;/g,"&").toLowerCase(),g=kt.toInt(kt.getValue(S,"ScreenWidth","=")),x=kt.toInt(kt.getValue(S,"ScreenHeight","="))}for(let S=0;S<o.length;S++)if(o[S].trim()!==""){o[S]="BitsPerPixel "+o[S],u[S]="Active "+u[S];let v=o[S].split(S3.EOL),b=u[S].split(S3.EOL),w=p[S].split(S3.EOL),C=kt.getValue(v,"BitsPerPixel"),O=kt.getValue(v,"Bounds").replace("{","").replace("}","").split(","),D=kt.getValue(v,"Primary"),M=kt.getValue(b,"MaxHorizontalImageSize"),P=kt.getValue(b,"MaxVerticalImageSize"),B=kt.getValue(b,"InstanceName").toLowerCase(),X=kt.getValue(w,"VideoOutputTechnology"),N="",A="";c.forEach(G=>{G.instanceId.toLowerCase().startsWith(B)&&d.startsWith("(")&&m.startsWith("PnP")&&(N=G.vendor,A=G.model)}),f.push({vendor:B.startsWith(h)&&N===""?d:N,model:B.startsWith(h)&&A===""?m:A,main:D.toLowerCase()==="true",builtin:X==="2147483648",connection:X&&KJ[X]?KJ[X]:"",resolutionx:kt.toInt(kt.getValue(O,"Width","=")),resolutiony:kt.toInt(kt.getValue(O,"Height","=")),sizex:M?parseInt(M,10):-1,sizey:P?parseInt(P,10):-1,pixeldepth:C,currentResX:kt.toInt(kt.getValue(O,"Width","=")),currentResY:kt.toInt(kt.getValue(O,"Height","=")),positionX:kt.toInt(kt.getValue(O,"X","=")),positionY:kt.toInt(kt.getValue(O,"Y","="))})}return o.length===0&&f.push({vendor:d,model:m,main:!0,resolutionx:g,resolutiony:x,sizex:-1,sizey:-1,pixeldepth:-1,currentResX:g,currentResY:x,positionX:0,positionY:0}),f}}