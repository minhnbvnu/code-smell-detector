function _fetchData(){_fetchData=_asyncToGenerator(_regeneratorRuntime().mark((function _callee(t){var r,a,i=arguments;return _regeneratorRuntime().wrap((function _callee$(l){for(;;)switch(l.prev=l.next){case 0:r=i.length>1&&void 0!==i[1]&&i[1];if(!isValidFetchUrl(t,document.baseURI)){l.next=21;break}l.next=4;return fetch(t);case 4:if((a=l.sent).ok){l.next=7;break}throw new Error(a.statusText);case 7:if(!r){l.next=15;break}l.t1=Uint8Array;l.next=11;return a.arrayBuffer();case 11:l.t2=l.sent;l.t0=new l.t1(l.t2);l.next=20;break;case 15:l.t3=o.stringToBytes;l.next=18;return a.text();case 18:l.t4=l.sent;l.t0=(0,l.t3)(l.t4);case 20:return l.abrupt("return",l.t0);case 21:return l.abrupt("return",new Promise((function(a,i){var l=new XMLHttpRequest;l.open("GET",t,!0);r&&(l.responseType="arraybuffer");l.onreadystatechange=function(){if(l.readyState===XMLHttpRequest.DONE){if(200===l.status||0===l.status){var t;r&&l.response?t=new Uint8Array(l.response):!r&&l.responseText&&(t=(0,o.stringToBytes)(l.responseText));if(t){a(t);return}}i(new Error(l.statusText))}};l.send(null)})));case 22:case"end":return l.stop()}}),_callee)})));return _fetchData.apply(this,arguments)}