function MeshShading(t,o,h,d,g){var _;_classCallCheck(this,MeshShading);_=r.call(this);if(!(t instanceof l.BaseStream))throw new c.FormatError("Mesh data is not a stream");var k=t.dict;_.shadingType=k.get("ShadingType");var S=k.getArray("BBox");Array.isArray(S)&&4===S.length?_.bbox=c.Util.normalizeRect(S):_.bbox=null;var x=u.ColorSpace.parse({cs:k.getRaw("CS")||k.getRaw("ColorSpace"),xref:o,resources:h,pdfFunctionFactory:d,localColorSpaceCache:g});_.background=k.has("Background")?x.getRgb(k.get("Background"),0):null;var O=k.getRaw("Function"),T=O?d.createFromArray(O):null;_.coords=[];_.colors=[];_.figures=[];var E={bitsPerCoordinate:k.get("BitsPerCoordinate"),bitsPerComponent:k.get("BitsPerComponent"),bitsPerFlag:k.get("BitsPerFlag"),decode:k.getArray("Decode"),colorFn:T,colorSpace:x,numComps:T?1:x.numComps},M=new C(t,E),R=!1;switch(_.shadingType){case y:_._decodeType4Shading(M);break;case m:var L=0|k.get("VerticesPerRow");if(L<2)throw new c.FormatError("Invalid VerticesPerRow");_._decodeType5Shading(M,L);break;case v:_._decodeType6Shading(M);R=!0;break;case w:_._decodeType7Shading(M);R=!0;break;default:(0,c.unreachable)("Unsupported mesh type.")}if(R){_._updateBounds();for(var j=0,D=_.figures.length;j<D;j++)_._buildFigureFromPatch(j)}_._updateBounds();_._packData();return _}