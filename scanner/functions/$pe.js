function $pe(e){let{ref:t,onInteractOutside:r,isDisabled:n,onInteractOutsideStart:i}=e,a=O.useRef({isPointerDown:!1,ignoreEmulatedMouseEvents:!1}),l=Lr(u=>{r&&zp(u,t)&&(i&&i(u),a.current.isPointerDown=!0)}),s=Lr(u=>{r&&r(u)});O.useEffect(()=>{let u=a.current;if(n)return;const c=t.current,d=rn(c);if(typeof PointerEvent<"u"){let f=h=>{u.isPointerDown&&zp(h,t)&&s(h),u.isPointerDown=!1};return d.addEventListener("pointerdown",l,!0),d.addEventListener("pointerup",f,!0),()=>{d.removeEventListener("pointerdown",l,!0),d.removeEventListener("pointerup",f,!0)}}else{let f=p=>{u.ignoreEmulatedMouseEvents?u.ignoreEmulatedMouseEvents=!1:u.isPointerDown&&zp(p,t)&&s(p),u.isPointerDown=!1},h=p=>{u.ignoreEmulatedMouseEvents=!0,u.isPointerDown&&zp(p,t)&&s(p),u.isPointerDown=!1};return d.addEventListener("mousedown",l,!0),d.addEventListener("mouseup",f,!0),d.addEventListener("touchstart",l,!0),d.addEventListener("touchend",h,!0),()=>{d.removeEventListener("mousedown",l,!0),d.removeEventListener("mouseup",f,!0),d.removeEventListener("touchstart",l,!0),d.removeEventListener("touchend",h,!0)}}},[t,n,l,s])}