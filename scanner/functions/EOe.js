function EOe(e){let t=[];function r(s){s=s||"";let o=s.split(" ")[0];if(o.substr(-1)===":"&&(o=o.substr(0,o.length-1)),o.substr(0,1)!=="["){let u=o.split("/");isNaN(parseInt(u[u.length-1]))?o=u[u.length-1]:o=u[0]}return o}function i(s){let o=0,u=0;function l(J){o=u,u=s.substring(t[J].to+o,1e3).indexOf(" ")}l(0);let p=parseInt(s.substring(t[0].from+o,t[0].to+u));l(1);let c=parseInt(s.substring(t[1].from+o,t[1].to+u));l(2);let d=parseFloat(s.substring(t[2].from+o,t[2].to+u).replace(/,/g,"."));l(3);let f=parseFloat(s.substring(t[3].from+o,t[3].to+u).replace(/,/g,"."));l(4);let m=parseInt(s.substring(t[4].from+o,t[4].to+u));l(5);let h=parseInt(s.substring(t[5].from+o,t[5].to+u));l(6);let g=parseInt(s.substring(t[6].from+o,t[6].to+u));l(7);let y=parseInt(s.substring(t[7].from+o,t[7].to+u))||0;l(8);let S=wOe(s.substring(t[8].from+o,t[8].to+u).trim());l(9);let x=s.substring(t[9].from+o,t[9].to+u).trim();x=x[0]==="R"?"running":x[0]==="S"?"sleeping":x[0]==="T"?"stopped":x[0]==="W"?"paging":x[0]==="X"?"dead":x[0]==="Z"?"zombie":x[0]==="D"||x[0]==="U"?"blocked":"unknown",l(10);let w=s.substring(t[10].from+o,t[10].to+u).trim();(w==="?"||w==="??")&&(w=""),l(11);let b=s.substring(t[11].from+o,t[11].to+u).trim();l(12);let C=s.substring(t[12].from+o,t[12].to+u).trim().replace(/\[/g,"").replace(/]/g,""),O="",D="",M="",P=C.indexOf(" -"),B=C.indexOf(" /");P=P>=0?P:1e4,B=B>=0?B:1e4;let X=Math.min(P,B),N=C.substr(0,X),A=C.substr(X),G=N.lastIndexOf("/");if(G>=0&&(O=N.substr(0,G),N=N.substr(G+1)),X===1e4){let J=N.split(" ");D=J.shift(),M=(J.join(" ")+" "+A).trim()}else D=N.trim(),M=A.trim();return{pid:p,parentPid:c,name:rl?r(D):D,pcpu:d,pcpuu:0,pcpus:0,pmem:f,priority:m,mem_vsz:h,mem_rss:g,nice:y,started:S,state:x,tty:w,user:b,command:D,params:M,path:O}}function a(s){let o=[];if(s.length>1){let u=s[0];t=Vr.parseHead(u,8),s.shift(),s.forEach(function(l){l.trim()!==""&&o.push(i(l))})}return o}function n(s){function o(l){let p=("0"+(l.getMonth()+1).toString()).substr(-2),c=l.getFullYear().toString(),d=("0"+l.getDay().toString()).substr(-2),f=l.getHours().toString(),m=l.getMinutes().toString(),h=("0"+l.getSeconds().toString()).substr(-2);return c+"-"+p+"-"+d+" "+f+":"+m+":"+h}let u=[];return s.forEach(function(l){if(l.trim()!==""){l=l.trim().replace(/ +/g," ").replace(/,+/g,".");let p=l.split(" "),c=p.slice(9).join(" "),d=parseFloat((1*parseInt(p[3])*1024/W3.totalmem()).toFixed(1)),f=p[5].split(":"),m=o(new Date(Date.now()-(f.length>1?(f[0]*60+f[1])*1e3:f[0]*1e3)));u.push({pid:parseInt(p[0]),parentPid:parseInt(p[1]),name:r(c),pcpu:0,pcpuu:0,pcpus:0,pmem:d,priority:0,mem_vsz:parseInt(p[2]),mem_rss:parseInt(p[3]),nice:parseInt(p[4]),started:m,state:p[6]==="R"?"running":p[6]==="S"?"sleeping":p[6]==="T"?"stopped":p[6]==="W"?"paging":p[6]==="X"?"dead":p[6]==="Z"?"zombie":p[6]==="D"||p[6]==="U"?"blocked":"unknown",tty:p[7],user:p[8],command:c})}}),u}return new Promise(s=>{process.nextTick(()=>{let o={all:0,running:0,blocked:0,sleeping:0,unknown:0,list:[]},u="";if(Ma.ms&&Date.now()-Ma.ms>=500||Ma.ms===0){if((rl||G3||X3||Y3||t0||hC)&&(rl&&(u="export LC_ALL=C; ps -axo pid:11,ppid:11,pcpu:6,pmem:6,pri:5,vsz:11,rss:11,ni:5,lstart:30,state:5,tty:15,user:20,command; unset LC_ALL"),(G3||X3||Y3)&&(u="export LC_ALL=C; ps -axo pid,ppid,pcpu,pmem,pri,vsz,rss,ni,lstart,state,tty,user,command; unset LC_ALL"),t0&&(u="export LC_ALL=C; ps -axo pid,ppid,pcpu,pmem,pri,vsz,rss,nice,lstart,state,tty,user,command -r; unset LC_ALL"),hC&&(u="ps -Ao pid,ppid,pcpu,pmem,pri,vsz,rss,nice,stime,s,tty,user,comm"),Op(u,{maxBuffer:1024*2e4},function(l,p){if(l)u="ps -o pid,ppid,vsz,rss,nice,etime,stat,tty,user,comm",hC&&(u="ps -o pid,ppid,vsz,rss,nice,etime,s,tty,user,comm"),Op(u,{maxBuffer:1024*2e4},function(c,d){if(c)e&&e(o),s(o);else{let f=d.toString().split(`
`);f.shift(),o.list=n(f),o.all=o.list.length,o.running=o.list.filter(function(m){return m.state==="running"}).length,o.blocked=o.list.filter(function(m){return m.state==="blocked"}).length,o.sleeping=o.list.filter(function(m){return m.state==="sleeping"}).length,e&&e(o),s(o)}});else if(o.list=a(p.toString().split(`
`)),o.all=o.list.length,o.running=o.list.filter(function(c){return c.state==="running"}).length,o.blocked=o.list.filter(function(c){return c.state==="blocked"}).length,o.sleeping=o.list.filter(function(c){return c.state==="sleeping"}).length,rl){u='cat /proc/stat | grep "cpu "';for(let c=0;c<o.list.length;c++)u+=";cat /proc/"+o.list[c].pid+"/stat";Op(u,{maxBuffer:1024*2e4},function(c,d){let f=d.toString().split(`
`),m=gC(f.shift()),h={},g={};for(let y=0;y<f.length;y++)if(g=vC(f[y],m,Ma),g.pid){let S=o.list.map(function(x){return x.pid}).indexOf(g.pid);S>=0&&(o.list[S].pcpu=g.pcpuu+g.pcpus,o.list[S].pcpuu=g.pcpuu,o.list[S].pcpus=g.pcpus),h[g.pid]={pcpuu:g.pcpuu,pcpus:g.pcpus,utime:g.utime,stime:g.stime,cutime:g.cutime,cstime:g.cstime}}Ma.all=m,Ma.list=h,Ma.ms=Date.now()-Ma.ms,Ma.result=o,e&&e(o),s(o)})}else e&&e(o),s(o)})),mC)try{Vr.wmic("process get /value").then((l,p)=>{if(!p){let c=l.split(/\n\s*\n/),d=[],f=[],m={},h=0,g=0;for(let y=0;y<c.length;y++)if(c[y].trim()!==""){let S=c[y].trim().split(`\r
`),x=parseInt(Vr.getValue(S,"ProcessId","=",!0),10),w=parseInt(Vr.getValue(S,"ParentProcessId","=",!0),10),b=Vr.getValue(S,"ExecutionState","="),C=Vr.getValue(S,"Caption","=",!0),O=Vr.getValue(S,"CommandLine","=",!0),D=Vr.getValue(S,"ExecutablePath","=",!0),M=parseInt(Vr.getValue(S,"UserModeTime","=",!0),10),P=parseInt(Vr.getValue(S,"KernelModeTime","=",!0),10),B=parseInt(Vr.getValue(S,"WorkingSetSize","=",!0),10);h=h+M,g=g+P,o.all++,b||o.unknown++,b==="3"&&o.running++,(b==="4"||b==="5")&&o.blocked++,f.push({pid:x,utime:M,stime:P,pcpu:0,pcpuu:0,pcpus:0}),d.push({pid:x,parentPid:w,name:C,pcpu:0,pcpuu:0,pcpus:0,pmem:B/W3.totalmem()*100,priority:parseInt(Vr.getValue(S,"Priority","=",!0),10),mem_vsz:parseInt(Vr.getValue(S,"PageFileUsage","=",!0),10),mem_rss:Math.floor(parseInt(Vr.getValue(S,"WorkingSetSize","=",!0),10)/1024),nice:0,started:bOe(Vr.getValue(S,"CreationDate","=",!0)),state:b?_re[b]:_re[0],tty:"",user:"",command:O||C,path:D,params:""})}o.sleeping=o.all-o.running-o.blocked-o.unknown,o.list=d;for(let y=0;y<f.length;y++){let S=Cre(f[y],h+g,Ma),x=o.list.map(function(w){return w.pid}).indexOf(S.pid);x>=0&&(o.list[x].pcpu=S.pcpuu+S.pcpus,o.list[x].pcpuu=S.pcpuu,o.list[x].pcpus=S.pcpus),m[S.pid]={pcpuu:S.pcpuu,pcpus:S.pcpus,utime:S.utime,stime:S.stime}}Ma.all=h+g,Ma.list=m,Ma.ms=Date.now()-Ma.ms,Ma.result=o}e&&e(o),s(o)})}catch{e&&e(o),s(o)}}else e&&e(Ma.result),s(Ma.result)})})}