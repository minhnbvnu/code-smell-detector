function TQ(e,t){t.classHierarchy.push("vtkArrowHandleRepresentation");var n=AQ({},e);function r(n){if(t.displayCallback){for(var r=[],i=e.getRepresentationStates(),o=0;o<i.length;o++)i[o].getActive()&&r.push(n[o]);if(r.length)return void t.displayCallback(r)}t.displayCallback()}function i(n){var r=!0===t.faceCamera||null==t.faceCamera&&e.is2DShape(),i=new Float64Array(9);Ea(i,t.viewMatrix);var o=Ra(new Float64Array(9));r&&Ba(o,i);var a=null;return a=e.isOrientableShape()?function(e){var n=new Float64Array(3);vo(n,t.orientation,e),n[2]=0;var r=Vs.buildFromDegree().rotateFromDirections([0,1,0],n).getMatrix(),i=new Float64Array(9);return Ea(i,r),i}(o):Ra(new Float64Array(9)),r&&(a=function(e,t,n){var r=new Float64Array(9);return ja(r,n,t),vo(e,e,r),r}(n,a,i)),a}t.internalPolyData=tc.newInstance({mtime:0}),t.internalArrays={points:t.internalPolyData.getPoints(),scale:Yn.newInstance({name:"scale",numberOfComponents:1,empty:!0}),color:Yn.newInstance({name:"color",numberOfComponents:1,empty:!0}),direction:Yn.newInstance({name:"direction",numberOfComponents:9,empty:!0})},t.internalPolyData.getPointData().addArray(t.internalArrays.scale),t.internalPolyData.getPointData().addArray(t.internalArrays.color),t.internalPolyData.getPointData().addArray(t.internalArrays.direction),t.displayMapper=Mx.newInstance(),t.displayActor=Mv.newInstance({parentProp:e}),t.displayActor.setMapper(t.displayMapper),t.displayMapper.setInputConnection(e.getOutputPort()),e.addActor(t.displayActor),t.alwaysVisibleActors=[t.displayActor],t.mapper=WF.newInstance({orientationArray:"direction",scaleArray:"scale",colorByArrayName:"color",scalarMode:gs.USE_POINT_FIELD_DATA}),t.mapper.setOrientationModeToMatrix(),t.mapper.setInputConnection(e.getOutputPort()),t.actor=Mv.newInstance({parentProp:e}),t.actor.setMapper(t.mapper),e.addActor(t.actor),e.setGlyphResolution=Se.chain(e.setGlyphResolution,(function(e){return t.glyph.setPhiResolution(e)&&t.glyph.setThetaResolution(e)})),e.setDisplayCallback=function(e){t.displayCallback=e,t.displayMapper.setCallback(e?r:null)},e.is2DShape=function(){return _Q.includes(t.shape)},e.isOrientableShape=function(){return OQ.includes(t.shape)},e.requestDataInternal=function(n,r){var o=t.internalArrays,a=o.points,s=o.scale,l=o.color,u=o.direction,c=e.getRepresentationStates(n[0]),d=c.length;l.getNumberOfValues()!==d&&(a.setData(new Float32Array(3*d),3),s.setData(new Float32Array(d)),l.setData(new Float32Array(d)),u.setData(new Float32Array(9*d)));for(var p={points:a.getData(),scale:s.getData(),color:l.getData(),direction:u.getData()},f=0;f<c.length;f++){var h=c[f],m=h.getActive(),g=m?t.activeScaleFactor:1,v=h.getOrigin();p.points[3*f+0]=v[0],p.points[3*f+1]=v[1],p.points[3*f+2]=v[2];var y=h.getScale3?h.getScale3():[1,1,1],b=i(y=y.map((function(e){return 0===e?2*t.defaultScale:2*e})));p.direction.set(b,9*f),p.scale[f]=g*(h.getScale1?h.getScale1():t.defaultScale),e.getScaleInPixels()&&(p.scale[f]*=e.getPixelWorldHeightAtCoord(v)),p.color[f]=t.useActiveColor&&m?t.activeColor:h.getColor()}t.internalPolyData.modified(),r[0]=t.internalPolyData},e.requestData=function(n,r){var i=e.getRepresentationStates(n[0])[0].getShape(),o=null==t.glyph;t.shape!==i&&Object.values(PQ).includes(i)&&(t.shape=i,o=!0),o&&(t.glyph=function(e){var t,n=(f(t={},PQ.STAR,{builder:gQ,initialValues:{shape:"star",height:.6}}),f(t,PQ.ARROWHEAD3,{builder:gQ,initialValues:{shape:"triangle"}}),f(t,PQ.ARROWHEAD4,{builder:gQ,initialValues:{shape:"arrow4points"}}),f(t,PQ.ARROWHEAD6,{builder:gQ,initialValues:{shape:"arrow6points"}}),f(t,PQ.CONE,{builder:uf,initialValues:{direction:[0,1,0]}}),f(t,PQ.SPHERE,{builder:ch}),f(t,PQ.CUBE,{builder:Ef,initialValues:{xLength:.8,yLength:.8,zLength:.8}}),f(t,PQ.DISK,{builder:Sf,initialValues:{resolution:30,radius:.5,direction:[0,0,1],lines:!1,face:!0}}),f(t,PQ.CIRCLE,{builder:Sf,initialValues:{resolution:30,radius:.5,direction:[0,0,1],lines:!0,face:!1}}),f(t,PQ.VIEWFINDER,{builder:wQ,initialValues:{radius:.1,spacing:.3,width:1.4}}),f(t,PQ.NONE,{builder:ch}),t)[e];return n.builder.newInstance(n.initialValues)}(t.shape),t.mapper.setInputConnection(t.glyph.getOutputPort(),1)),e.requestDataInternal(n,r)},e.updateActorVisibility=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:iP.FRONT_BUFFER,r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=e.getRepresentationStates()[0];n.updateActorVisibility(t,r,i&&o.isVisible())}}