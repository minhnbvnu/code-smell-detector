function uve(e,t,r){let{isDisabled:n,trigger:i}=e,a=nr(),l=O.useRef(!1),s=O.useRef(!1),u=()=>{(l.current||s.current)&&t.open(s.current)},c=v=>{!l.current&&!s.current&&t.close(v)};O.useEffect(()=>{let v=y=>{r&&r.current&&y.key==="Escape"&&(y.stopPropagation(),t.close(!0))};if(t.isOpen)return document.addEventListener("keydown",v,!0),()=>{document.removeEventListener("keydown",v,!0)}},[r,t]);let d=()=>{i!=="focus"&&(ms()==="pointer"?l.current=!0:l.current=!1,u())},f=()=>{i!=="focus"&&(s.current=!1,l.current=!1,c())},h=()=>{s.current=!1,l.current=!1,c(!0)},p=()=>{yo()&&(s.current=!0,u())},m=()=>{s.current=!1,l.current=!1,c(!0)},{hoverProps:g}=wr({isDisabled:n,onHoverStart:d,onHoverEnd:f}),{focusableProps:b}=Ts({isDisabled:n,onFocus:p,onBlur:m},r);return{triggerProps:{"aria-describedby":t.isOpen?a:void 0,...$e(b,g,{onPointerDown:h,onKeyDown:h})},tooltipProps:{id:a}}}