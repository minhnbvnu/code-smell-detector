function buildTextContentItem(t){var r=t.chars,o=t.extraSpacing,c=N.font;if(r)for(var l=c.charsToGlyphs(r),u=N.fontMatrix[0]*N.fontSize,h=0,d=l.length;h<d;h++){var g=l[h];if(!g.isInvisibleFormatMark){var y=N.charSpacing+(h+1===d?o:0),v=g.width;c.vertical&&(v=g.vmetric?g.vmetric[0]:-v);var w=v*u;if(g.isWhitespace){if(c.vertical){y+=-w+N.wordSpacing;N.translateTextMatrix(0,-y)}else{y+=w+N.wordSpacing;N.translateTextMatrix(y*N.textHScale,0)}saveLastChar(" ")}else if(compareWithLastPosition()){var _=ensureTextContentItem();g.isZeroWidthDiacritic&&(w=0);if(c.vertical){N.translateTextMatrix(0,w);w=Math.abs(w);_.height+=w}else{w*=N.textHScale;N.translateTextMatrix(w,0);_.width+=w}w&&(_.prevTransform=getCurrentTextTransform());var k=g.unicode;k=M[k]||k;saveLastChar(k=(0,m.reverseIfRtl)(k))&&_.str.push(" ");_.str.push(k);y&&(c.vertical?N.translateTextMatrix(0,-y):N.translateTextMatrix(y*N.textHScale,0))}}}else{var S=N.charSpacing+o;S&&(c.vertical?N.translateTextMatrix(0,-S):N.translateTextMatrix(S*N.textHScale,0))}}