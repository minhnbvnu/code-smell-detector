function dD(e){var n,t,i,r,s,o,a,u,c,l;let f=lD(e,e.component.data.sources);const{outputNodes:d,outputNodeRefCounts:p}=e.component.data;const g=e.data;const m=g&&(cg(g)||og(g)||ag(g));const h=!m&&e.parent?e.parent.component.data.ancestorParse.clone():new sg;if(cg(g)){if(lg(g)){f=new Lw(f,g.sequence)}else if(dg(g)){f=new Tw(f,g.graticule)}h.parseNothing=true}else if(((n=g===null||g===void 0?void 0:g.format)===null||n===void 0?void 0:n.parse)===null){h.parseNothing=true}f=(t=Nw.makeExplicit(f,e,h))!==null&&t!==void 0?t:f;f=new Mw(f);const b=e.parent&&FA(e.parent);if(jA(e)||AA(e)){if(b){f=(i=Fw.makeFromEncoding(f,e))!==null&&i!==void 0?i:f}}if(e.transforms.length>0){f=fD(f,e,h)}const y=zw(e);const v=Pw(e);f=(r=Nw.makeWithAncestors(f,{},Object.assign(Object.assign({},y),v),h))!==null&&r!==void 0?r:f;if(jA(e)){f=PA.parseAll(f,e);f=zA.parseAll(f,e)}if(jA(e)||AA(e)){if(!b){f=(s=Fw.makeFromEncoding(f,e))!==null&&s!==void 0?s:f}f=(o=Yg.makeFromEncoding(f,e))!==null&&o!==void 0?o:f;f=tO.parseAllForSortIndex(f,e)}const x=e.getDataName(pg.Raw);const O=new Gg(f,x,pg.Raw,p);d[x]=O;f=O;if(jA(e)){const n=Cw.makeFromEncoding(f,e);if(n){f=n;if(kh(e)){f=new Mw(f)}}f=(a=NA.makeFromEncoding(f,e))!==null&&a!==void 0?a:f;f=(u=uj.makeFromEncoding(f,e))!==null&&u!==void 0?u:f}if(jA(e)){f=(c=SA.make(f,e))!==null&&c!==void 0?c:f}const w=e.getDataName(pg.Main);const j=new Gg(f,w,pg.Main,p);d[w]=j;f=j;if(jA(e)){Ex(e,j)}let A=null;if(AA(e)){const n=e.getName("facet");f=(l=uD(f,e.facet))!==null&&l!==void 0?l:f;A=new Ew(f,e,n,j.getSource());d[n]=A}return Object.assign(Object.assign({},e.component.data),{outputNodes:d,outputNodeRefCounts:p,raw:O,main:j,facetRoot:A,ancestorParse:h})}