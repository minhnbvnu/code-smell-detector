function Zit(n,t,e,i){let r={},o=new WeakMap;function s(h){let p=h.target;p.index!==null&&t.remove(p.index);for(let f in p.attributes)t.remove(p.attributes[f]);p.removeEventListener("dispose",s),delete r[p.id];let d=o.get(p);d&&(t.remove(d),o.delete(p)),i.releaseStatesOfGeometry(p),p.isInstancedBufferGeometry===!0&&delete p._maxInstanceCount,e.memory.geometries--}function a(h,p){return r[p.id]===!0||(p.addEventListener("dispose",s),r[p.id]=!0,e.memory.geometries++),p}function l(h){let p=h.attributes;for(let f in p)t.update(p[f],34962);let d=h.morphAttributes;for(let f in d){let m=d[f];for(let x=0,g=m.length;x<g;x++)t.update(m[x],34962)}}function c(h){let p=[],d=h.index,f=h.attributes.position,m=0;if(d!==null){let v=d.array;m=d.version;for(let b=0,y=v.length;b<y;b+=3){let _=v[b+0],S=v[b+1],E=v[b+2];p.push(_,S,S,E,E,_)}}else{let v=f.array;m=f.version;for(let b=0,y=v.length/3-1;b<y;b+=3){let _=b+0,S=b+1,E=b+2;p.push(_,S,S,E,E,_)}}let x=new(Vz(p)?Yx:Kx)(p,1);x.version=m;let g=o.get(h);g&&t.remove(g),o.set(h,x)}function u(h){let p=o.get(h);if(p){let d=h.index;d!==null&&p.version<d.version&&c(h)}else c(h);return o.get(h)}return{get:a,update:l,getWireframeAttribute:u}}