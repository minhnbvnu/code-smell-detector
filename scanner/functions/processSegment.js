function processSegment(t,r){var o,c,u,h,g=t.header,y=t.data,m=t.end,v=t.start;switch(g.type){case 0:var w={},_=(0,l.readUint16)(y,v);w.huffman=!!(1&_);w.refinement=!!(2&_);w.huffmanDHSelector=_>>2&3;w.huffmanDWSelector=_>>4&3;w.bitmapSizeSelector=_>>6&1;w.aggregationInstancesSelector=_>>7&1;w.bitmapCodingContextUsed=!!(256&_);w.bitmapCodingContextRetained=!!(512&_);w.template=_>>10&3;w.refinementTemplate=_>>12&1;v+=2;if(!w.huffman){h=0===w.template?4:1;c=[];for(u=0;u<h;u++){c.push({x:(0,l.readInt8)(y,v),y:(0,l.readInt8)(y,v+1)});v+=2}w.at=c}if(w.refinement&&!w.refinementTemplate){c=[];for(u=0;u<2;u++){c.push({x:(0,l.readInt8)(y,v),y:(0,l.readInt8)(y,v+1)});v+=2}w.refinementAt=c}w.numberOfExportedSymbols=(0,l.readUint32)(y,v);v+=4;w.numberOfNewSymbols=(0,l.readUint32)(y,v);v+=4;o=[w,g.number,g.referredTo,y,v,m];break;case 6:case 7:var k={};k.info=readRegionSegmentInformation(y,v);v+=S;var C=(0,l.readUint16)(y,v);v+=2;k.huffman=!!(1&C);k.refinement=!!(2&C);k.logStripSize=C>>2&3;k.stripSize=1<<k.logStripSize;k.referenceCorner=C>>4&3;k.transposed=!!(64&C);k.combinationOperator=C>>7&3;k.defaultPixelValue=C>>9&1;k.dsOffset=C<<17>>27;k.refinementTemplate=C>>15&1;if(k.huffman){var x=(0,l.readUint16)(y,v);v+=2;k.huffmanFS=3&x;k.huffmanDS=x>>2&3;k.huffmanDT=x>>4&3;k.huffmanRefinementDW=x>>6&3;k.huffmanRefinementDH=x>>8&3;k.huffmanRefinementDX=x>>10&3;k.huffmanRefinementDY=x>>12&3;k.huffmanRefinementSizeSelector=!!(16384&x)}if(k.refinement&&!k.refinementTemplate){c=[];for(u=0;u<2;u++){c.push({x:(0,l.readInt8)(y,v),y:(0,l.readInt8)(y,v+1)});v+=2}k.refinementAt=c}k.numberOfSymbolInstances=(0,l.readUint32)(y,v);v+=4;o=[k,g.referredTo,y,v,m];break;case 16:var O={},T=y[v++];O.mmr=!!(1&T);O.template=T>>1&3;O.patternWidth=y[v++];O.patternHeight=y[v++];O.maxPatternIndex=(0,l.readUint32)(y,v);v+=4;o=[O,g.number,y,v,m];break;case 22:case 23:var E={};E.info=readRegionSegmentInformation(y,v);v+=S;var M=y[v++];E.mmr=!!(1&M);E.template=M>>1&3;E.enableSkip=!!(8&M);E.combinationOperator=M>>4&7;E.defaultPixelValue=M>>7&1;E.gridWidth=(0,l.readUint32)(y,v);v+=4;E.gridHeight=(0,l.readUint32)(y,v);v+=4;E.gridOffsetX=4294967295&(0,l.readUint32)(y,v);v+=4;E.gridOffsetY=4294967295&(0,l.readUint32)(y,v);v+=4;E.gridVectorX=(0,l.readUint16)(y,v);v+=2;E.gridVectorY=(0,l.readUint16)(y,v);v+=2;o=[E,g.referredTo,y,v,m];break;case 38:case 39:var R={};R.info=readRegionSegmentInformation(y,v);v+=S;var L=y[v++];R.mmr=!!(1&L);R.template=L>>1&3;R.prediction=!!(8&L);if(!R.mmr){h=0===R.template?4:1;c=[];for(u=0;u<h;u++){c.push({x:(0,l.readInt8)(y,v),y:(0,l.readInt8)(y,v+1)});v+=2}R.at=c}o=[R,y,v,m];break;case 48:var j={width:(0,l.readUint32)(y,v),height:(0,l.readUint32)(y,v+4),resolutionX:(0,l.readUint32)(y,v+8),resolutionY:(0,l.readUint32)(y,v+12)};4294967295===j.height&&delete j.height;var D=y[v+16];(0,l.readUint16)(y,v+17);j.lossless=!!(1&D);j.refinement=!!(2&D);j.defaultPixelValue=D>>2&1;j.combinationOperator=D>>3&3;j.requiresBuffer=!!(32&D);j.combinationOperatorOverride=!!(64&D);o=[j];break;case 49:case 50:case 51:case 62:break;case 53:o=[g.number,y,v,m];break;default:throw new d("segment type ".concat(g.typeName,"(").concat(g.type,") is not implemented"))}var N="on"+g.typeName;N in r&&r[N].apply(r,o)}