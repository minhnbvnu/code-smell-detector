function TextLayerRenderTask(t){var r,a=this,l=t.textContent,c=t.textContentStream,u=t.container,d=t.viewport,h=t.textDivs,p=t.textContentItemsStr,v=t.enhanceTextSelection;!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,TextLayerRenderTask);v&&(0,o.deprecated)("The `enhanceTextSelection` functionality will be removed in the future.");this._textContent=l;this._textContentStream=c;this._container=u;this._document=u.ownerDocument;this._viewport=d;this._textDivs=h||[];this._textContentItemsStr=p||[];this._enhanceTextSelection=!!v;this._fontInspectorEnabled=!(null===(r=globalThis.FontInspector)||void 0===r||!r.enabled);this._reader=null;this._layoutTextLastFontSize=null;this._layoutTextLastFontFamily=null;this._layoutTextCtx=null;this._textDivProperties=new WeakMap;this._renderingDone=!1;this._canceled=!1;this._capability=(0,i.createPromiseCapability)();this._renderTimer=null;this._bounds=[];this._devicePixelRatio=globalThis.devicePixelRatio||1;this._capability.promise.finally((function(){a._enhanceTextSelection||(a._textDivProperties=null);if(a._layoutTextCtx){a._layoutTextCtx.canvas.width=0;a._layoutTextCtx.canvas.height=0;a._layoutTextCtx=null}})).catch((function(){}))}