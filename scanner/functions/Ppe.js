function Ppe(e,t){let r=O.useRef(),n=O.useRef();St(()=>{let i=e.current;if(!t){n.current&&(cancelAnimationFrame(n.current),n.current=void 0);return}const a=rn(i?i[0]:void 0);let l=c=>{if(c.key!=="Tab"||c.altKey||c.ctrlKey||c.metaKey||!df(e))return;let d=a.activeElement,f=e.current;if(!f||!ai(d,f))return;let h=ru(f),p=ta(h,{tabbable:!0},f);if(!d)return;p.currentNode=d;let m=c.shiftKey?p.previousNode():p.nextNode();m||(p.currentNode=c.shiftKey?f[f.length-1].nextElementSibling:f[0].previousElementSibling,m=c.shiftKey?p.previousNode():p.nextNode()),c.preventDefault(),m&&oo(m,!0)},s=c=>{(!br||Ug(br,e))&&ai(c.target,e.current)?(br=e,r.current=c.target):df(e)&&!Zg(c.target,e)?r.current?r.current.focus():br&&br.current&&qg(br.current):df(e)&&(r.current=c.target)},u=c=>{n.current&&cancelAnimationFrame(n.current),n.current=requestAnimationFrame(()=>{if(a.activeElement&&df(e)&&!Zg(a.activeElement,e))if(br=e,a.body.contains(c.target)){var d;r.current=c.target,(d=r.current)===null||d===void 0||d.focus()}else br.current&&qg(br.current)})};return a.addEventListener("keydown",l,!1),a.addEventListener("focusin",s,!1),i==null||i.forEach(c=>c.addEventListener("focusin",s,!1)),i==null||i.forEach(c=>c.addEventListener("focusout",u,!1)),()=>{a.removeEventListener("keydown",l,!1),a.removeEventListener("focusin",s,!1),i==null||i.forEach(c=>c.removeEventListener("focusin",s,!1)),i==null||i.forEach(c=>c.removeEventListener("focusout",u,!1))}},[e,t]),St(()=>()=>{n.current&&cancelAnimationFrame(n.current)},[n])}