function ZDe(e,t){let r=e.length,n=0,i,a,l,s;for(;r--;)if(i=e[r][1],a){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;e[r][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(l){if(e[r][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(a=r,i.type!=="labelLink")){n=2;break}}else i.type==="labelEnd"&&(l=r);const u={type:e[a][1].type==="labelLink"?"link":"image",start:Object.assign({},e[a][1].start),end:Object.assign({},e[e.length-1][1].end)},c={type:"label",start:Object.assign({},e[a][1].start),end:Object.assign({},e[l][1].end)},d={type:"labelText",start:Object.assign({},e[a+n+2][1].end),end:Object.assign({},e[l-2][1].start)};return s=[["enter",u,t],["enter",c,t]],s=ya(s,e.slice(a+1,a+n+3)),s=ya(s,[["enter",d,t]]),s=ya(s,tM(t.parser.constructs.insideSpan.null,e.slice(a+n+4,l-3),t)),s=ya(s,[["exit",d,t],e[l-2],e[l-1],["exit",c,t]]),s=ya(s,e.slice(l+1)),s=ya(s,[["exit",u,t]]),_l(e,a,e.length,s),e}