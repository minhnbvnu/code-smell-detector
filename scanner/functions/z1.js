function z1(e){let{selectionManager:t,key:r,ref:n,shouldSelectOnPressUp:i,shouldUseVirtualFocus:a,focus:l,isDisabled:s,onAction:u,allowsDifferentPressOrigin:c,linkBehavior:d="action"}=e,f=Nh(),h=Z=>{if(Z.pointerType==="keyboard"&&ix(Z))t.toggleSelection(r);else{if(t.selectionMode==="none")return;if(t.isLink(r)){if(d==="selection"){f.open(n.current,Z),t.setSelectedKeys(t.selectedKeys);return}else if(d==="override"||d==="none")return}t.selectionMode==="single"?t.isSelected(r)&&!t.disallowEmptySelection?t.toggleSelection(r):t.replaceSelection(r):Z&&Z.shiftKey?t.extendSelection(r):t.selectionBehavior==="toggle"||Z&&(Gu(Z)||Z.pointerType==="touch"||Z.pointerType==="virtual")?t.toggleSelection(r):t.replaceSelection(r)}};O.useEffect(()=>{r===t.focusedKey&&t.isFocused&&!a&&(l?l():document.activeElement!==n.current&&Tn(n.current))},[n,r,t.focusedKey,t.childFocusStrategy,t.isFocused,a]),s=s||t.isDisabled(r);let p={};!a&&!s?p={tabIndex:r===t.focusedKey?0:-1,onFocus(Z){Z.target===n.current&&t.setFocusedKey(r)}}:s&&(p.onMouseDown=Z=>{Z.preventDefault()});let m=t.isLink(r)&&d==="override",g=t.isLink(r)&&d!=="selection"&&d!=="none",b=!s&&t.canSelectItem(r)&&!m,v=(u||g)&&!s,y=v&&(t.selectionBehavior==="replace"?!b:!b||t.isEmpty),$=v&&b&&t.selectionBehavior==="replace",x=y||$,k=O.useRef(null),C=x&&b,A=O.useRef(!1),E=O.useRef(!1),M=Z=>{u&&u(),g&&f.open(n.current,Z)},D={};i?(D.onPressStart=Z=>{k.current=Z.pointerType,A.current=C,Z.pointerType==="keyboard"&&(!x||x_())&&h(Z)},c?(D.onPressUp=y?null:Z=>{Z.pointerType!=="keyboard"&&b&&h(Z)},D.onPress=y?M:null):D.onPress=Z=>{if(y||$&&Z.pointerType!=="mouse"){if(Z.pointerType==="keyboard"&&!O_())return;M(Z)}else Z.pointerType!=="keyboard"&&b&&h(Z)}):(D.onPressStart=Z=>{k.current=Z.pointerType,A.current=C,E.current=y,b&&(Z.pointerType==="mouse"&&!y||Z.pointerType==="keyboard"&&(!v||x_()))&&h(Z)},D.onPress=Z=>{(Z.pointerType==="touch"||Z.pointerType==="pen"||Z.pointerType==="virtual"||Z.pointerType==="keyboard"&&x&&O_()||Z.pointerType==="mouse"&&E.current)&&(x?M(Z):b&&h(Z))}),p["data-key"]=r,D.preventFocusOnPress=a;let{pressProps:T,isPressed:B}=zi(D),R=$?Z=>{k.current==="mouse"&&(Z.stopPropagation(),Z.preventDefault(),M(Z))}:void 0,{longPressProps:_}=iU({isDisabled:!C,onLongPress(Z){Z.pointerType==="touch"&&(h(Z),t.setSelectionBehavior("toggle"))}}),V=Z=>{k.current==="touch"&&A.current&&Z.preventDefault()},W=t.isLink(r)?Z=>{ps.isOpening||Z.preventDefault()}:void 0;return{itemProps:$e(p,b||y?T:{},C?_:{},{onDoubleClick:R,onDragStartCapture:V,onClick:W}),isPressed:B,isSelected:t.isSelected(r),isFocused:t.isFocused&&t.focusedKey===r,isDisabled:s,allowsSelection:b,hasAction:x}}