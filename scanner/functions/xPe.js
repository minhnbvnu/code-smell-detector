function xPe(e){return new Promise(t=>{process.nextTick(()=>{let r={total:tu.totalmem(),free:tu.freemem(),used:tu.totalmem()-tu.freemem(),active:tu.totalmem()-tu.freemem(),available:tu.freemem(),buffers:0,cached:0,slab:0,buffcache:0,swaptotal:0,swapused:0,swapfree:0};if($te&&yPe.readFile("/proc/meminfo",function(i,a){if(!i){let n=a.toString().split(`
`);r.total=parseInt(Et.getValue(n,"memtotal"),10),r.total=r.total?r.total*1024:tu.totalmem(),r.free=parseInt(Et.getValue(n,"memfree"),10),r.free=r.free?r.free*1024:tu.freemem(),r.used=r.total-r.free,r.buffers=parseInt(Et.getValue(n,"buffers"),10),r.buffers=r.buffers?r.buffers*1024:0,r.cached=parseInt(Et.getValue(n,"cached"),10),r.cached=r.cached?r.cached*1024:0,r.slab=parseInt(Et.getValue(n,"slab"),10),r.slab=r.slab?r.slab*1024:0,r.buffcache=r.buffers+r.cached+r.slab;let s=parseInt(Et.getValue(n,"memavailable"),10);r.available=s?s*1024:r.free+r.buffcache,r.active=r.total-r.available,r.swaptotal=parseInt(Et.getValue(n,"swaptotal"),10),r.swaptotal=r.swaptotal?r.swaptotal*1024:0,r.swapfree=parseInt(Et.getValue(n,"swapfree"),10),r.swapfree=r.swapfree?r.swapfree*1024:0,r.swapused=r.swaptotal-r.swapfree}e&&e(r),t(r)}),(Wte||Gte||Xte)&&bg('/sbin/sysctl -a 2>/dev/null | grep -E "hw.realmem|hw.physmem|vm.stats.vm.v_page_count|vm.stats.vm.v_wire_count|vm.stats.vm.v_active_count|vm.stats.vm.v_inactive_count|vm.stats.vm.v_cache_count|vm.stats.vm.v_free_count|vm.stats.vm.v_page_size"',function(i,a){if(!i){let n=a.toString().split(`
`),s=parseInt(Et.getValue(n,"vm.stats.vm.v_page_size"),10),o=parseInt(Et.getValue(n,"vm.stats.vm.v_inactive_count"),10)*s,u=parseInt(Et.getValue(n,"vm.stats.vm.v_cache_count"),10)*s;r.total=parseInt(Et.getValue(n,"hw.realmem"),10),isNaN(r.total)&&(r.total=parseInt(Et.getValue(n,"hw.physmem"),10)),r.free=parseInt(Et.getValue(n,"vm.stats.vm.v_free_count"),10)*s,r.buffcache=o+u,r.available=r.buffcache+r.free,r.active=r.total-r.free-r.buffcache,r.swaptotal=0,r.swapfree=0,r.swapused=0}e&&e(r),t(r)}),Yte&&(e&&e(r),t(r)),Hte&&bg('vm_stat 2>/dev/null | grep "Pages active"',function(i,a){if(!i){let n=a.toString().split(`
`);r.active=parseInt(n[0].split(":")[1],10)*4096,r.buffcache=r.used-r.active,r.available=r.free+r.buffcache}bg("sysctl -n vm.swapusage 2>/dev/null",function(n,s){if(!n){let o=s.toString().split(`
`);if(o.length>0){let u=o[0].replace(/,/g,".").replace(/M/g,"");u=u.trim().split("  ");for(let l=0;l<u.length;l++)u[l].toLowerCase().indexOf("total")!==-1&&(r.swaptotal=parseFloat(u[l].split("=")[1].trim())*1024*1024),u[l].toLowerCase().indexOf("used")!==-1&&(r.swapused=parseFloat(u[l].split("=")[1].trim())*1024*1024),u[l].toLowerCase().indexOf("free")!==-1&&(r.swapfree=parseFloat(u[l].split("=")[1].trim())*1024*1024)}}e&&e(r),t(r)})}),Kte){let i=0,a=0;try{Et.wmic("pagefile get AllocatedBaseSize, CurrentUsage").then((n,s)=>{s||n.split(`\r
`).filter(u=>u.trim()!=="").filter((u,l)=>l>0).forEach(function(u){u!==""&&(u=u.trim().split(/\s\s+/),i=i+parseInt(u[0],10),a=a+parseInt(u[1],10))}),r.swaptotal=i*1024*1024,r.swapused=a*1024*1024,r.swapfree=r.swaptotal-r.swapused,e&&e(r),t(r)})}catch{e&&e(r),t(r)}}})})}