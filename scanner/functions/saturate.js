function saturate(x) {
    return Math.max(Math.min(x, 1), 0);
}