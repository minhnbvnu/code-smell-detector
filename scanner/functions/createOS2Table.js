function createOS2Table(t,r,o){o=o||{unitsPerEm:0,yMax:0,yMin:0,ascent:0,descent:0};var l=0,u=0,d=0,g=0,y=null,m=0;if(r){for(var v in r){(y>(v|=0)||!y)&&(y=v);m<v&&(m=v);var w=(0,h.getUnicodeRangeFor)(v);if(w<32)l|=1<<w;else if(w<64)u|=1<<w-32;else if(w<96)d|=1<<w-64;else{if(!(w<123))throw new c.FormatError("Unicode ranges Bits > 123 are reserved for internal usage");g|=1<<w-96}}m>65535&&(m=65535)}else{y=0;m=255}var _=t.bbox||[0,0,0,0],k=o.unitsPerEm||1/(t.fontMatrix||c.FONT_IDENTITY_MATRIX)[0],S=t.ascentScaled?1:k/M,C=o.ascent||Math.round(S*(t.ascent||_[3])),x=o.descent||Math.round(S*(t.descent||_[1]));x>0&&t.descent>0&&_[1]<0&&(x=-x);var O=o.yMax||C,T=-o.yMin||-x;return"\0$ô\0\0\0»\0\0\0»\0\0ß\x001\0\0\0\0"+String.fromCharCode(t.fixedPitch?9:0)+"\0\0\0\0\0\0"+(0,c.string32)(l)+(0,c.string32)(u)+(0,c.string32)(d)+(0,c.string32)(g)+"*21*"+string16(t.italicAngle?1:0)+string16(y||t.firstChar)+string16(m||t.lastChar)+string16(C)+string16(x)+"\0d"+string16(O)+string16(T)+"\0\0\0\0\0\0\0\0"+string16(t.xHeight)+string16(t.capHeight)+string16(0)+string16(y||t.firstChar)+"\0"}