function quantizeAndInverse(t,r,o){var c,l,h,d,g,x,O,T,E,M,R,L,j,D,N,U,H,G=t.quantizationTable,$=t.blockData;if(!G)throw new u("missing required Quantization Table.");for(var X=0;X<64;X+=8){E=$[r+X];M=$[r+X+1];R=$[r+X+2];L=$[r+X+3];j=$[r+X+4];D=$[r+X+5];N=$[r+X+6];U=$[r+X+7];E*=G[X];if(0!=(M|R|L|j|D|N|U)){M*=G[X+1];R*=G[X+2];L*=G[X+3];j*=G[X+4];D*=G[X+5];N*=G[X+6];U*=G[X+7];l=(c=(c=S*E+128>>8)+(l=S*j+128>>8)+1>>1)-l;H=(h=R)*k+(d=N)*_+128>>8;h=h*_-d*k+128>>8;O=(g=(g=C*(M-U)+128>>8)+(O=D<<4)+1>>1)-O;x=(T=(T=C*(M+U)+128>>8)+(x=L<<4)+1>>1)-x;d=(c=c+(d=H)+1>>1)-d;h=(l=l+h+1>>1)-h;H=g*w+T*v+2048>>12;g=g*v-T*w+2048>>12;T=H;H=x*m+O*y+2048>>12;x=x*y-O*m+2048>>12;O=H;o[X]=c+T;o[X+7]=c-T;o[X+1]=l+O;o[X+6]=l-O;o[X+2]=h+x;o[X+5]=h-x;o[X+3]=d+g;o[X+4]=d-g}else{H=S*E+512>>10;o[X]=H;o[X+1]=H;o[X+2]=H;o[X+3]=H;o[X+4]=H;o[X+5]=H;o[X+6]=H;o[X+7]=H}}for(var q=0;q<8;++q){E=o[q];if(0!=((M=o[q+8])|(R=o[q+16])|(L=o[q+24])|(j=o[q+32])|(D=o[q+40])|(N=o[q+48])|(U=o[q+56]))){l=(c=4112+((c=S*E+2048>>12)+(l=S*j+2048>>12)+1>>1))-l;H=(h=R)*k+(d=N)*_+2048>>12;h=h*_-d*k+2048>>12;d=H;O=(g=(g=C*(M-U)+2048>>12)+(O=D)+1>>1)-O;x=(T=(T=C*(M+U)+2048>>12)+(x=L)+1>>1)-x;H=g*w+T*v+2048>>12;g=g*v-T*w+2048>>12;T=H;H=x*m+O*y+2048>>12;x=x*y-O*m+2048>>12;(E=(c=c+d+1>>1)+T)<16?E=0:E>=4080?E=255:E>>=4;(M=(l=l+h+1>>1)+(O=H))<16?M=0:M>=4080?M=255:M>>=4;(R=(h=l-h)+x)<16?R=0:R>=4080?R=255:R>>=4;(L=(d=c-d)+g)<16?L=0:L>=4080?L=255:L>>=4;(j=d-g)<16?j=0:j>=4080?j=255:j>>=4;(D=h-x)<16?D=0:D>=4080?D=255:D>>=4;(N=l-O)<16?N=0:N>=4080?N=255:N>>=4;(U=c-T)<16?U=0:U>=4080?U=255:U>>=4;$[r+q]=E;$[r+q+8]=M;$[r+q+16]=R;$[r+q+24]=L;$[r+q+32]=j;$[r+q+40]=D;$[r+q+48]=N;$[r+q+56]=U}else{H=(H=S*E+8192>>14)<-2040?0:H>=2024?255:H+2056>>4;$[r+q]=H;$[r+q+8]=H;$[r+q+16]=H;$[r+q+24]=H;$[r+q+32]=H;$[r+q+40]=H;$[r+q+48]=H;$[r+q+56]=H}}}