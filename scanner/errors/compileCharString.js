function compileCharString(t,r,o,l){function moveTo(t,o){r.push({cmd:"moveTo",args:[t,o]})}function lineTo(t,o){r.push({cmd:"lineTo",args:[t,o]})}function bezierCurveTo(t,o,c,l,u,h){r.push({cmd:"bezierCurveTo",args:[t,o,c,l,u,h]})}var u=[],d=0,g=0,y=0;!function parse(t){for(var m=0;m<t.length;){var v=!1,w=t[m++],_=void 0,k=void 0,S=void 0,C=void 0,x=void 0,O=void 0,T=void 0,E=void 0;switch(w){case 1:case 3:case 18:case 23:y+=u.length>>1;v=!0;break;case 4:g+=u.pop();moveTo(d,g);v=!0;break;case 5:for(;u.length>0;){d+=u.shift();g+=u.shift();lineTo(d,g)}break;case 6:for(;u.length>0;){lineTo(d+=u.shift(),g);if(0===u.length)break;g+=u.shift();lineTo(d,g)}break;case 7:for(;u.length>0;){g+=u.shift();lineTo(d,g);if(0===u.length)break;lineTo(d+=u.shift(),g)}break;case 8:for(;u.length>0;){_=d+u.shift();S=g+u.shift();k=_+u.shift();C=S+u.shift();d=k+u.shift();g=C+u.shift();bezierCurveTo(_,S,k,C,d,g)}break;case 10:T=u.pop();E=null;if(o.isCFFCIDFont){var M=o.fdSelect.getFDIndex(l);if(M>=0&&M<o.fdArray.length){var R=o.fdArray[M],L=void 0;R.privateDict&&R.privateDict.subrsIndex&&(L=R.privateDict.subrsIndex.objects);L&&(E=L[T+=getSubroutineBias(L)])}else(0,c.warn)("Invalid fd index for glyph index.")}else E=o.subrs[T+o.subrsBias];E&&parse(E);break;case 11:return;case 12:switch(w=t[m++]){case 34:k=(_=d+u.shift())+u.shift();x=g+u.shift();d=k+u.shift();bezierCurveTo(_,g,k,x,d,x);k=(_=d+u.shift())+u.shift();d=k+u.shift();bezierCurveTo(_,x,k,g,d,g);break;case 35:_=d+u.shift();S=g+u.shift();k=_+u.shift();C=S+u.shift();d=k+u.shift();g=C+u.shift();bezierCurveTo(_,S,k,C,d,g);_=d+u.shift();S=g+u.shift();k=_+u.shift();C=S+u.shift();d=k+u.shift();g=C+u.shift();bezierCurveTo(_,S,k,C,d,g);u.pop();break;case 36:bezierCurveTo(_=d+u.shift(),x=g+u.shift(),k=_+u.shift(),O=x+u.shift(),d=k+u.shift(),O);bezierCurveTo(_=d+u.shift(),O,k=_+u.shift(),O+u.shift(),d=k+u.shift(),g);break;case 37:var j=d,D=g;_=d+u.shift();S=g+u.shift();k=_+u.shift();C=S+u.shift();d=k+u.shift();g=C+u.shift();bezierCurveTo(_,S,k,C,d,g);_=d+u.shift();S=g+u.shift();k=_+u.shift();C=S+u.shift();d=k;g=C;Math.abs(d-j)>Math.abs(g-D)?d+=u.shift():g+=u.shift();bezierCurveTo(_,S,k,C,d,g);break;default:throw new c.FormatError("unknown operator: 12 ".concat(w))}break;case 14:if(u.length>=4){var N=u.pop(),U=u.pop();g=u.pop();d=u.pop();r.push({cmd:"save"},{cmd:"translate",args:[d,g]});var H=lookupCmap(o.cmap,String.fromCharCode(o.glyphNameMap[h.StandardEncoding[N]]));compileCharString(o.glyphs[H.glyphId],r,o,H.glyphId);r.push({cmd:"restore"});H=lookupCmap(o.cmap,String.fromCharCode(o.glyphNameMap[h.StandardEncoding[U]]));compileCharString(o.glyphs[H.glyphId],r,o,H.glyphId)}return;case 19:case 20:m+=(y+=u.length>>1)+7>>3;v=!0;break;case 21:g+=u.pop();moveTo(d+=u.pop(),g);v=!0;break;case 22:moveTo(d+=u.pop(),g);v=!0;break;case 24:for(;u.length>2;){_=d+u.shift();S=g+u.shift();k=_+u.shift();C=S+u.shift();d=k+u.shift();g=C+u.shift();bezierCurveTo(_,S,k,C,d,g)}d+=u.shift();g+=u.shift();lineTo(d,g);break;case 25:for(;u.length>6;){d+=u.shift();g+=u.shift();lineTo(d,g)}_=d+u.shift();S=g+u.shift();k=_+u.shift();C=S+u.shift();d=k+u.shift();g=C+u.shift();bezierCurveTo(_,S,k,C,d,g);break;case 26:u.length%2&&(d+=u.shift());for(;u.length>0;){_=d;S=g+u.shift();k=_+u.shift();C=S+u.shift();d=k;g=C+u.shift();bezierCurveTo(_,S,k,C,d,g)}break;case 27:u.length%2&&(g+=u.shift());for(;u.length>0;)bezierCurveTo(_=d+u.shift(),S=g,k=_+u.shift(),C=S+u.shift(),d=k+u.shift(),g=C);break;case 28:u.push((t[m]<<24|t[m+1]<<16)>>16);m+=2;break;case 29:T=u.pop()+o.gsubrsBias;(E=o.gsubrs[T])&&parse(E);break;case 30:for(;u.length>0;){_=d;S=g+u.shift();k=_+u.shift();C=S+u.shift();d=k+u.shift();g=C+(1===u.length?u.shift():0);bezierCurveTo(_,S,k,C,d,g);if(0===u.length)break;_=d+u.shift();S=g;k=_+u.shift();C=S+u.shift();g=C+u.shift();bezierCurveTo(_,S,k,C,d=k+(1===u.length?u.shift():0),g)}break;case 31:for(;u.length>0;){_=d+u.shift();S=g;k=_+u.shift();C=S+u.shift();g=C+u.shift();bezierCurveTo(_,S,k,C,d=k+(1===u.length?u.shift():0),g);if(0===u.length)break;_=d;S=g+u.shift();k=_+u.shift();C=S+u.shift();d=k+u.shift();g=C+(1===u.length?u.shift():0);bezierCurveTo(_,S,k,C,d,g)}break;default:if(w<32)throw new c.FormatError("unknown operator: ".concat(w));if(w<247)u.push(w-139);else if(w<251)u.push(256*(w-247)+t[m++]+108);else if(w<255)u.push(256*-(w-251)-t[m++]-108);else{u.push((t[m]<<24|t[m+1]<<16|t[m+2]<<8|t[m+3])/65536);m+=4}}v&&(u.length=0)}}(t)}