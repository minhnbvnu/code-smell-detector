function _get_setup_template($ch,$srate,$req,$q_or_bitrate,$base_setting) {
 $ch = $ch|0;
 $srate = $srate|0;
 $req = +$req;
 $q_or_bitrate = $q_or_bitrate|0;
 $base_setting = $base_setting|0;
 var $$0 = 0, $$01$ph22 = 0.0, $$lcssa = 0, $$lcssa3 = 0, $$lcssa4 = 0, $$phi$trans$insert = 0, $$pre = 0.0, $$pre21 = 0, $0 = 0, $1 = 0.0, $10 = 0, $11 = 0, $12 = 0, $13 = 0, $14 = 0, $15 = 0, $16 = 0, $17 = 0, $18 = 0.0, $19 = 0;
 var $2 = 0.0, $20 = 0, $21 = 0.0, $22 = 0, $23 = 0, $24 = 0, $25 = 0, $26 = 0, $27 = 0, $28 = 0, $29 = 0, $3 = 0, $30 = 0, $31 = 0, $32 = 0, $33 = 0, $34 = 0, $35 = 0, $36 = 0, $37 = 0;
 var $38 = 0, $39 = 0, $4 = 0, $40 = 0.0, $41 = 0, $42 = 0, $43 = 0, $44 = 0, $45 = 0.0, $46 = 0, $47 = 0, $48 = 0, $49 = 0.0, $5 = 0, $50 = 0, $51 = 0.0, $52 = 0, $53 = 0, $54 = 0, $55 = 0.0;
 var $56 = 0.0, $57 = 0, $58 = 0.0, $59 = 0.0, $6 = 0, $60 = 0, $61 = 0, $62 = 0.0, $63 = 0.0, $64 = 0.0, $65 = 0.0, $66 = 0.0, $67 = 0.0, $68 = 0.0, $69 = 0.0, $7 = 0, $70 = 0.0, $71 = 0.0, $72 = 0.0, $73 = 0;
 var $74 = 0.0, $8 = 0, $9 = 0, $i$0$be = 0, $i$0$be$us = 0, $i$08 = 0, $i$08$us = 0, $j$0$lcssa = 0, $j$05 = 0, $or$cond = 0, $or$cond$us = 0, $storemerge = 0.0, label = 0, sp = 0;
 sp = STACKTOP;
 $0 = ($q_or_bitrate|0)==(0);
 L1: do {
  if ($0) {
   $26 = 26336;$i$08 = 0;
   while(1) {
    $25 = HEAP32[$26>>2]|0;
    $27 = ((($25)) + 12|0);
    $28 = HEAP32[$27>>2]|0;
    $29 = ($28|0)==(-1);
    $30 = ($28|0)==($ch|0);
    $or$cond = $29 | $30;
    if ($or$cond) {
     $31 = ((($25)) + 16|0);
     $32 = HEAP32[$31>>2]|0;
     $33 = ($32|0)>($srate|0);
     if (!($33)) {
      $34 = ((($25)) + 20|0);
      $35 = HEAP32[$34>>2]|0;
      $36 = ($35|0)<($srate|0);
      if (!($36)) {
       $37 = HEAP32[$25>>2]|0;
       $38 = ((($25)) + 8|0);
       $39 = HEAP32[$38>>2]|0;
       $40 = +HEAPF64[$39>>3];
       $41 = $40 > $req;
       if (!($41)) {
        $44 = (($39) + ($37<<3)|0);
        $45 = +HEAPF64[$44>>3];
        $46 = $45 < $req;
        if (!($46)) {
         $$01$ph22 = $req;$$lcssa = $37;$$lcssa3 = $26;$$lcssa4 = $39;$74 = $40;
         break L1;
        }
       }
      }
     }
    }
    $i$0$be = (($i$08) + 1)|0;
    $42 = (26336 + ($i$0$be<<2)|0);
    $43 = ($i$0$be|0)==(17);
    if ($43) {
     $$0 = 0;
     break;
    } else {
     $26 = $42;$i$08 = $i$0$be;
    }
   }
   return ($$0|0);
  } else {
   $1 = (+($ch|0));
   $2 = $req / $1;
   $4 = 26336;$i$08$us = 0;
   while(1) {
    $3 = HEAP32[$4>>2]|0;
    $5 = ((($3)) + 12|0);
    $6 = HEAP32[$5>>2]|0;
    $7 = ($6|0)==(-1);
    $8 = ($6|0)==($ch|0);
    $or$cond$us = $7 | $8;
    if ($or$cond$us) {
     $9 = ((($3)) + 16|0);
     $10 = HEAP32[$9>>2]|0;
     $11 = ($10|0)>($srate|0);
     if (!($11)) {
      $12 = ((($3)) + 20|0);
      $13 = HEAP32[$12>>2]|0;
      $14 = ($13|0)<($srate|0);
      if (!($14)) {
       $15 = HEAP32[$3>>2]|0;
       $16 = ((($3)) + 4|0);
       $17 = HEAP32[$16>>2]|0;
       $18 = +HEAPF64[$17>>3];
       $19 = $2 < $18;
       if (!($19)) {
        $20 = (($17) + ($15<<3)|0);
        $21 = +HEAPF64[$20>>3];
        $22 = $2 > $21;
        if (!($22)) {
         $$01$ph22 = $2;$$lcssa = $15;$$lcssa3 = $4;$$lcssa4 = $17;$74 = $18;
         break L1;
        }
       }
      }
     }
    }
    $i$0$be$us = (($i$08$us) + 1)|0;
    $23 = (26336 + ($i$0$be$us<<2)|0);
    $24 = ($i$0$be$us|0)==(17);
    if ($24) {
     $$0 = 0;
     break;
    } else {
     $4 = $23;$i$08$us = $i$0$be$us;
    }
   }
   return ($$0|0);
  }
 } while(0);
 $47 = ($$lcssa|0)>(0);
 L22: do {
  if ($47) {
   $49 = $74;$j$05 = 0;
   while(1) {
    $48 = !($$01$ph22 >= $49);
    $$pre21 = (($j$05) + 1)|0;
    if (!($48)) {
     $50 = (($$lcssa4) + ($$pre21<<3)|0);
     $51 = +HEAPF64[$50>>3];
     $52 = $$01$ph22 < $51;
     if ($52) {
      $j$0$lcssa = $j$05;
      break L22;
     }
    }
    $53 = ($$pre21|0)<($$lcssa|0);
    if (!($53)) {
     $j$0$lcssa = $$pre21;
     break L22;
    }
    $$phi$trans$insert = (($$lcssa4) + ($$pre21<<3)|0);
    $$pre = +HEAPF64[$$phi$trans$insert>>3];
    $49 = $$pre;$j$05 = $$pre21;
   }
  } else {
   $j$0$lcssa = 0;
  }
 } while(0);
 $54 = ($j$0$lcssa|0)==($$lcssa|0);
 if ($54) {
  $55 = (+($$lcssa|0));
  $56 = $55 + -0.001;
  $storemerge = $56;
 } else {
  $57 = (($$lcssa4) + ($j$0$lcssa<<3)|0);
  $58 = +HEAPF64[$57>>3];
  $59 = $58;
  $60 = (($j$0$lcssa) + 1)|0;
  $61 = (($$lcssa4) + ($60<<3)|0);
  $62 = +HEAPF64[$61>>3];
  $63 = $62;
  $64 = $59;
  $65 = $$01$ph22 - $64;
  $66 = $63 - $59;
  $67 = $66;
  $68 = $65 / $67;
  $69 = $68;
  $70 = (+($j$0$lcssa|0));
  $71 = $69 + $70;
  $72 = $71;
  $storemerge = $72;
 }
 HEAPF64[$base_setting>>3] = $storemerge;
 $73 = HEAP32[$$lcssa3>>2]|0;
 $$0 = $73;
 return ($$0|0);
}