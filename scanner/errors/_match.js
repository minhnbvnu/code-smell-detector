function _match(i,o,s){if("string"==typeof o){var u=i.join("");return 0===o.indexOf(u)?i.length===o.length?{match:!0,matchedChars:i}:{partialMatch:!0}:0===u.indexOf(o)?s&&i.length>o.length?{overflow:!0}:{match:!0,matchedChars:i.slice(0,o.length)}:void 0}if(Array.isArray(o)){for(var C=i.slice(),_=0;_<o.length;){var w=_match(C,o[_],s&&_===o.length-1);if(!w)return;if(w.overflow)return w;if(!w.match){if(w.partialMatch)return{partialMatch:!0};throw new Error("Unsupported match result:\n".concat(JSON.stringify(w,null,2)))}if(0===(C=C.slice(w.matchedChars.length)).length)return _===o.length-1?{match:!0,matchedChars:i}:{partialMatch:!0};_++}return s?{overflow:!0}:{match:!0,matchedChars:i.slice(0,i.length-C.length)}}switch(o.op){case"|":for(var P,B,z=AsYouTypeFormatter_PatternMatcher_createForOfIteratorHelperLoose(o.args);!(B=z()).done;){var U=_match(i,B.value,s);if(U){if(U.overflow)return U;if(U.match)return{match:!0,matchedChars:U.matchedChars};if(!U.partialMatch)throw new Error("Unsupported match result:\n".concat(JSON.stringify(U,null,2)));P=!0}}return P?{partialMatch:!0}:void 0;case"[]":for(var V,$=AsYouTypeFormatter_PatternMatcher_createForOfIteratorHelperLoose(o.args);!(V=$()).done;){var Z=V.value;if(i[0]===Z)return 1===i.length?{match:!0,matchedChars:i}:s?{overflow:!0}:{match:!0,matchedChars:[Z]}}return;default:throw new Error("Unsupported instruction tree: ".concat(o))}}