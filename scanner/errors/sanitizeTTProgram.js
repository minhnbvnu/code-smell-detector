function sanitizeTTProgram(t,r){for(var o,l,u,h,d,g=t.data,y=0,m=0,v=0,w=[],_=[],k=[],S=r.tooComplexToFollowFunctions,C=!1,x=0,O=0,E=g.length;y<E;){var M=g[y++];if(64===M){l=g[y++];if(C||O)y+=l;else for(o=0;o<l;o++)w.push(g[y++])}else if(65===M){l=g[y++];if(C||O)y+=2*l;else for(o=0;o<l;o++){u=g[y++];w.push(u<<8|g[y++])}}else if(176==(248&M)){l=M-176+1;if(C||O)y+=l;else for(o=0;o<l;o++)w.push(g[y++])}else if(184==(248&M)){l=M-184+1;if(C||O)y+=2*l;else for(o=0;o<l;o++){u=g[y++];w.push(u<<8|g[y++])}}else if(43!==M||S)if(44!==M||S){if(45===M)if(C){C=!1;m=y}else{if(!(d=_.pop())){(0,c.warn)("TT: ENDF bad stack");r.hintsValid=!1;return}h=k.pop();g=d.data;y=d.i;r.functionsStackDeltas[h]=w.length-d.stackTop}else if(137===M){if(C||O){(0,c.warn)("TT: nested IDEFs not allowed");S=!0}C=!0;v=y}else if(88===M)++x;else if(27===M)O=x;else if(89===M){O===x&&(O=0);--x}else if(28===M&&!C&&!O){var R=w.at(-1);R>0&&(y+=R-1)}}else{if(C||O){(0,c.warn)("TT: nested FDEFs not allowed");S=!0}C=!0;v=y;h=w.pop();r.functionsDefined[h]={data:g,i:y}}else if(!C&&!O){h=w.at(-1);if(isNaN(h))(0,c.info)("TT: CALL empty stack (or invalid entry).");else{r.functionsUsed[h]=!0;if(h in r.functionsStackDeltas){var L=w.length+r.functionsStackDeltas[h];if(L<0){(0,c.warn)("TT: CALL invalid functions stack delta.");r.hintsValid=!1;return}w.length=L}else if(h in r.functionsDefined&&!k.includes(h)){_.push({data:g,i:y,stackTop:w.length-1});k.push(h);if(!(d=r.functionsDefined[h])){(0,c.warn)("TT: CALL non-existent function");r.hintsValid=!1;return}g=d.data;y=d.i}}}if(!C&&!O){var j=0;M<=142?j=T[M]:M>=192&&M<=223?j=-1:M>=224&&(j=-2);if(M>=113&&M<=117){l=w.pop();isNaN(l)||(j=2*-l)}for(;j<0&&w.length>0;){w.pop();j++}for(;j>0;){w.push(NaN);j--}}}r.tooComplexToFollowFunctions=S;var D=[g];y>g.length&&D.push(new Uint8Array(y-g.length));if(v>m){(0,c.warn)("TT: complementing a missing function tail");D.push(new Uint8Array([34,45]))}!function foldTTTable(t,r){if(r.length>1){var o,c,l=0;for(o=0,c=r.length;o<c;o++)l+=r[o].length;l=l+3&-4;var u=new Uint8Array(l),h=0;for(o=0,c=r.length;o<c;o++){u.set(r[o],h);h+=r[o].length}t.data=u;t.length=l}}(t,D)}