function compareWithLastPosition(){var t=getCurrentTextTransform(),r=t[4],o=t[5],c=r-E[0],l=o-E[1];if(c<0||c>E[2]||l<0||l>E[3])return!1;if(!v||!N.font||!L.prevTransform)return!0;var u=L.prevTransform[4],h=L.prevTransform[5];if(u===r&&h===o)return!0;var d=-1;t[0]&&0===t[1]&&0===t[2]?d=t[0]>0?0:180:t[1]&&0===t[0]&&0===t[3]&&(d=t[1]>0?90:270);switch(d){case 0:break;case 90:var g=[o,r];r=g[0];o=g[1];var y=[h,u];u=y[0];h=y[1];break;case 180:var m=[-r,-o,-u,-h];r=m[0];o=m[1];u=m[2];h=m[3];break;case 270:var w=[-o,-r];r=w[0];o=w[1];var _=[-h,-u];u=_[0];h=_[1];break;default:var k=_slicedToArray(applyInverseRotation(r,o,t),2);r=k[0];o=k[1];var S=_slicedToArray(applyInverseRotation(u,h,L.prevTransform),2);u=S[0];h=S[1]}if(N.font.vertical){var C=(h-o)/L.textAdvanceScale,x=r-u,O=Math.sign(L.height);if(C<O*L.negativeSpaceMax){if(Math.abs(x)>.5*L.width){appendEOL();return!0}resetLastChars();flushTextContentItem();return!0}if(Math.abs(x)>L.width){appendEOL();return!0}C<=O*L.notASpace&&resetLastChars();if(C<=O*L.trackingSpaceMin)L.height+=C;else if(!addFakeSpaces(C,L.prevTransform,O))if(0===L.str.length){resetLastChars();R.items.push({str:" ",dir:"ltr",width:0,height:Math.abs(C),transform:L.prevTransform,fontName:L.fontName,hasEOL:!1})}else L.height+=C;return!0}var T=(r-u)/L.textAdvanceScale,M=o-h,j=Math.sign(L.width);if(T<j*L.negativeSpaceMax){if(Math.abs(M)>.5*L.height){appendEOL();return!0}resetLastChars();flushTextContentItem();return!0}if(Math.abs(M)>L.height){appendEOL();return!0}T<=j*L.notASpace&&resetLastChars();if(T<=j*L.trackingSpaceMin)L.width+=T;else if(!addFakeSpaces(T,L.prevTransform,j))if(0===L.str.length){resetLastChars();R.items.push({str:" ",dir:"ltr",width:Math.abs(T),height:0,transform:L.prevTransform,fontName:L.fontName,hasEOL:!1})}else L.width+=T;return!0}